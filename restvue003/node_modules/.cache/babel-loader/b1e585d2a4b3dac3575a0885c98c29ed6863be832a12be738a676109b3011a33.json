{"ast":null,"code":"import downloadFlie from \"@/components/downloadFlie.vue\";\nimport dropFiles from \"@/components/dropFiles.vue\";\nimport openDir from \"@/components/openDir.vue\";\nimport ViewButton from \"@/components/ViewButton.vue\";\nexport default {\n  name: \"DirsFileList\",\n  data() {\n    return {\n      currentPage1: 1,\n      pageSize: 10,\n      search: \"\",\n      appliedSearch: \"\" // 新增的搜索状态\n    };\n  },\n  components: {\n    downloadFlie,\n    dropFiles,\n    openDir,\n    ViewButton\n  },\n  computed: {\n    // 过滤后的数据\n    filteredData() {\n      const keyword = this.appliedSearch.toLowerCase();\n      if (!keyword) return this.$store.state.DirsFileList;\n      return this.$store.state.DirsFileList.filter(item => item.data.toLowerCase().includes(keyword));\n    },\n    // 当前页数据\n    currentPageData() {\n      const start = (this.currentPage1 - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.filteredData.slice(start, end);\n    },\n    luj() {\n      return `路径：（${this.$store.state.DirPath}）`;\n    }\n  },\n  mounted() {\n    this.$store.dispatch(\"DirsFileList\");\n    this.$store.dispatch(\"openDirs\");\n  },\n  methods: {\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage1 = 1; // 重置到第一页\n    },\n    handleCurrentChange(val) {\n      this.currentPage1 = val;\n    },\n    handleSearch() {\n      this.appliedSearch = this.search; // 应用搜索条件\n      this.currentPage1 = 1; // 重置到第一页\n    }\n  }\n};","map":{"version":3,"names":["downloadFlie","dropFiles","openDir","ViewButton","name","data","currentPage1","pageSize","search","appliedSearch","components","computed","filteredData","keyword","toLowerCase","$store","state","DirsFileList","filter","item","includes","currentPageData","start","end","slice","luj","DirPath","mounted","dispatch","methods","handleSizeChange","val","handleCurrentChange","handleSearch"],"sources":["F:\\Windows\\Desktop\\code\\restvue003\\src\\components\\DirsFileList.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"table-pagination-wrapper\">\r\n      <el-table\r\n        :data=\"currentPageData\"\r\n        style=\"width: auto\"\r\n        border\r\n        max-height=\"75vh\"\r\n        class=\"centered-table\"\r\n      >\r\n        <el-table-column :label=\"luj\">\r\n          <el-table-column>\r\n            <template #header>\r\n              <el-input\r\n                class=\"header\"\r\n                v-model=\"search\"\r\n                placeholder=\"输入关键字搜索\"\r\n                width=\"300\"\r\n              ></el-input>\r\n              <el-button class=\"search\" @click=\"handleSearch\">搜索</el-button>\r\n            </template>\r\n            <el-table-column prop=\"data\" label=\"文件名\" width=\"360vw\" sortable>\r\n            </el-table-column>\r\n            <el-table-column label=\"下载\" width=\"120vw\">\r\n              <template #default=\"scope\">\r\n                <downloadFlie :down=\"scope.row.data\"></downloadFlie>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"删除\" width=\"120vw\">\r\n              <template #default=\"scope\">\r\n                <dropFiles :dropFiles=\"scope.row.data\"> </dropFiles>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"打开文件\" width=\"120vw\">\r\n              <template #default=\"scope\">\r\n                <openDir\r\n                  v-if=\"scope.row.FileType == '文件夹'\"\r\n                  :openDir=\"scope.row.data\"\r\n                ></openDir>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"查看文件\" width=\"120vw\">\r\n              <template #default=\"scope\">\r\n                <ViewButton\r\n                  v-if=\"scope.row.FileType == '查看文件'\"\r\n                  :ViewButtonOfficEword=\"scope.row.data\"\r\n                ></ViewButton>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table-column>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        class=\"centered-pagination\"\r\n        background\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"currentPage1\"\r\n        :page-sizes=\"[10, 50, 100, 1000]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"filteredData.length\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport downloadFlie from \"@/components/downloadFlie.vue\";\r\nimport dropFiles from \"@/components/dropFiles.vue\";\r\nimport openDir from \"@/components/openDir.vue\";\r\nimport ViewButton from \"@/components/ViewButton.vue\";\r\n\r\nexport default {\r\n  name: \"DirsFileList\",\r\n  data() {\r\n    return {\r\n      currentPage1: 1,\r\n      pageSize: 10,\r\n      search: \"\",\r\n      appliedSearch: \"\", // 新增的搜索状态\r\n    };\r\n  },\r\n  components: {\r\n    downloadFlie,\r\n    dropFiles,\r\n    openDir,\r\n    ViewButton,\r\n  },\r\n  computed: {\r\n    // 过滤后的数据\r\n    filteredData() {\r\n      const keyword = this.appliedSearch.toLowerCase();\r\n      if (!keyword) return this.$store.state.DirsFileList;\r\n\r\n      return this.$store.state.DirsFileList.filter((item) =>\r\n        item.data.toLowerCase().includes(keyword)\r\n      );\r\n    },\r\n    // 当前页数据\r\n    currentPageData() {\r\n      const start = (this.currentPage1 - 1) * this.pageSize;\r\n      const end = start + this.pageSize;\r\n      return this.filteredData.slice(start, end);\r\n    },\r\n    luj() {\r\n      return `路径：（${this.$store.state.DirPath}）`;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$store.dispatch(\"DirsFileList\");\r\n    this.$store.dispatch(\"openDirs\");\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.currentPage1 = 1; // 重置到第一页\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage1 = val;\r\n    },\r\n    handleSearch() {\r\n      this.appliedSearch = this.search; // 应用搜索条件\r\n      this.currentPage1 = 1; // 重置到第一页\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 保持原有样式不变 */\r\n.container {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.table-pagination-wrapper {\r\n  width: 100%;\r\n  max-width: 1200px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.centered-table {\r\n  margin: 0 auto;\r\n  width: auto !important;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.centered-pagination {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .container {\r\n    padding: 10px;\r\n  }\r\n\r\n  .centered-table {\r\n    width: 100% !important;\r\n  }\r\n\r\n  .centered-pagination ::v-deep .el-pagination__jump {\r\n    display: none !important;\r\n  }\r\n}\r\n\r\n.header {\r\n  width: 50%;\r\n}\r\n\r\n.search {\r\n  margin-left: 1%;\r\n}\r\n</style>\r\n"],"mappings":"AAqEA,OAAOA,YAAW,MAAO,+BAA+B;AACxD,OAAOC,SAAQ,MAAO,4BAA4B;AAClD,OAAOC,OAAM,MAAO,0BAA0B;AAC9C,OAAOC,UAAS,MAAO,6BAA6B;AAEpD,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,CAAC;MACfC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,aAAa,EAAE,EAAE,CAAE;IACrB,CAAC;EACH,CAAC;EACDC,UAAU,EAAE;IACVV,YAAY;IACZC,SAAS;IACTC,OAAO;IACPC;EACF,CAAC;EACDQ,QAAQ,EAAE;IACR;IACAC,YAAYA,CAAA,EAAG;MACb,MAAMC,OAAM,GAAI,IAAI,CAACJ,aAAa,CAACK,WAAW,CAAC,CAAC;MAChD,IAAI,CAACD,OAAO,EAAE,OAAO,IAAI,CAACE,MAAM,CAACC,KAAK,CAACC,YAAY;MAEnD,OAAO,IAAI,CAACF,MAAM,CAACC,KAAK,CAACC,YAAY,CAACC,MAAM,CAAEC,IAAI,IAChDA,IAAI,CAACd,IAAI,CAACS,WAAW,CAAC,CAAC,CAACM,QAAQ,CAACP,OAAO,CAC1C,CAAC;IACH,CAAC;IACD;IACAQ,eAAeA,CAAA,EAAG;MAChB,MAAMC,KAAI,GAAI,CAAC,IAAI,CAAChB,YAAW,GAAI,CAAC,IAAI,IAAI,CAACC,QAAQ;MACrD,MAAMgB,GAAE,GAAID,KAAI,GAAI,IAAI,CAACf,QAAQ;MACjC,OAAO,IAAI,CAACK,YAAY,CAACY,KAAK,CAACF,KAAK,EAAEC,GAAG,CAAC;IAC5C,CAAC;IACDE,GAAGA,CAAA,EAAG;MACJ,OAAQ,OAAM,IAAI,CAACV,MAAM,CAACC,KAAK,CAACU,OAAQ,GAAE;IAC5C;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,cAAc,CAAC;IACpC,IAAI,CAACb,MAAM,CAACa,QAAQ,CAAC,UAAU,CAAC;EAClC,CAAC;EACDC,OAAO,EAAE;IACPC,gBAAgBA,CAACC,GAAG,EAAE;MACpB,IAAI,CAACxB,QAAO,GAAIwB,GAAG;MACnB,IAAI,CAACzB,YAAW,GAAI,CAAC,EAAE;IACzB,CAAC;IACD0B,mBAAmBA,CAACD,GAAG,EAAE;MACvB,IAAI,CAACzB,YAAW,GAAIyB,GAAG;IACzB,CAAC;IACDE,YAAYA,CAAA,EAAG;MACb,IAAI,CAACxB,aAAY,GAAI,IAAI,CAACD,MAAM,EAAE;MAClC,IAAI,CAACF,YAAW,GAAI,CAAC,EAAE;IACzB;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}