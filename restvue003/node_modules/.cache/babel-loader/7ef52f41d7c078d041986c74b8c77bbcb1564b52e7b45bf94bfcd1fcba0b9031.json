{"ast":null,"code":"import axios from 'axios';\nimport { ElNotification } from 'element-plus';\nimport VueUploadComponent from 'vue-upload-component';\n// import progressEl from '@/components/progressEl.vue'\nexport default {\n  name: \"updataFile2\",\n  components: {\n    'vue-upload-component': VueUploadComponent\n  },\n  data() {\n    return {\n      uploadedCount: 0,\n      totalFiles: 0,\n      totalSize: 0,\n      uploadPercentage: 10,\n      files: [],\n      additionalData: {\n        uploadpath: this.$store.state.DirPath\n      }\n    };\n  },\n  methods: {\n    SuLvZhuangHuang(i) {\n      if (i < 1024) {\n        return i.toFixed(2) + ' B/s';\n      } else if (i < 1024 * 1024) {\n        return (i / 1024).toFixed(2) + ' KB/s';\n      } else if (i < 1024 * 1024 * 1024) {\n        return (i / (1024 * 1024)).toFixed(2) + ' MB/s';\n      } else {\n        return (i / (1024 * 1024 * 1024)).toFixed(2) + ' GB/s';\n      }\n    },\n    inputFile(newl) {\n      // for(let i=0;i<this.$store.state.files.length;i++)\n      // if( this.$store.state.files[i].size !==0){\n      //  console.log(this.$store.state.files[i].response);\n      // }l\n\n      console.log(this.$store.state.files);\n      this.$store.state.files = this.files;\n      if (newl.error != '') {\n        ElNotification({\n          title: '错误',\n          message: newl.error,\n          duration: 0\n        });\n      }\n      if (newl.success == true) {\n        ElNotification({\n          title: '成功',\n          message: newl.progress,\n          duration: 3000\n        });\n        axios({\n          url: this.$store.state.api + '/DirsFileList',\n          method: \"post\",\n          params: {\n            'DirsFileList': this.$store.state.DirPath\n          }\n        }).then(res => {\n          console.log(res.data.data);\n          this.$store.state.DirsFileList = res.data.data;\n          for (let i = 0; i < this.$store.state.DirsFileList.length; i++) {\n            this.$store.state.DirsFileList[i] = {\n              'index': i,\n              'data': this.$store.state.DirsFileList[i],\n              \"FileType\": false\n            };\n            axios({\n              url: this.$store.state.api + \"/OpenDir\",\n              method: 'post'\n            }).then(res => {\n              let h = Object.values(res.data.su);\n              for (let i = 0; i < this.$store.state.DirsFileList.length; i++) {\n                for (let j = 0; j <= h.length; j++) {\n                  if (this.$store.state.DirsFileList[i].data == h[j]) {\n                    this.$store.state.DirsFileList[i].FileType = '文件夹';\n                    break;\n                  }\n                }\n              }\n            });\n          }\n        });\n      }\n    },\n    startUpload() {\n      for (let i = 0; i < this.$store.state.files.length; i++) if (this.$store.state.files[i].size !== 0) {\n        this.$refs.upload.active = true;\n        this.$store.state.FilesTyoes = '进度条';\n        this.$store.state.files[i].progress = Number(this.$store.state.files[i].progress);\n      }\n      console.log(this.files);\n    },\n    fiel() {\n      for (let i = 0; i < this.$store.state.files.length; i++) if (this.$store.state.files[i].size !== 0) {\n        this.$store.state.files[i].size = Number(this.$store.state.files[i].size);\n      }\n    },\n    clearFiles(files) {\n      if (this.files.length != 0) {\n        this.$refs.upload.remove(files);\n        this.$store.state.files = [];\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","ElNotification","VueUploadComponent","name","components","data","uploadedCount","totalFiles","totalSize","uploadPercentage","files","additionalData","uploadpath","$store","state","DirPath","methods","SuLvZhuangHuang","i","toFixed","inputFile","newl","console","log","error","title","message","duration","success","progress","url","api","method","params","then","res","DirsFileList","length","h","Object","values","su","j","FileType","startUpload","size","$refs","upload","active","FilesTyoes","Number","fiel","clearFiles","remove"],"sources":["C:\\Users\\Administered\\Desktop\\restvue003\\src\\components\\updataFile2.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <el-row>\r\n        <el-col :span=\"4\"> <vue-upload-component\r\n    ref=\"upload\"\r\n    :post-action=\"$store.state.api+'/uploaders'\"\r\n    directory\r\n    multiple\r\n    v-model=\"files\"\r\n    @click=\"fiel()\"\r\n    @input-file=\"inputFile\"\r\n    :thread=\"5\"\r\n    :data=\"additionalData\"\r\n  >\r\n <el-button>上传目录</el-button>\r\n</vue-upload-component></el-col>\r\n<el-col :span=\"4\"><el-button @click=\"startUpload\">开始上传</el-button></el-col>\r\n<el-col :span=\"4\"><el-button @click=\"clearFiles(files)\">取消选择</el-button></el-col>\r\n</el-row>\r\n\r\n<div v-for=\"i in $store.state.files\" :key=\"i\">\r\n  <el-row>\r\n    <el-col :span=\"4\">文件名:  {{i.name}}</el-col>\r\n<el-col :span=\"4\">大小:{{ SuLvZhuangHuang(i.size )}}</el-col>\r\n</el-row>\r\n</div>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nimport{ElNotification} from 'element-plus'\r\nimport VueUploadComponent from 'vue-upload-component'\r\n// import progressEl from '@/components/progressEl.vue'\r\nexport default{\r\n    name:\"updataFile2\",\r\n    components:{\r\n        'vue-upload-component': VueUploadComponent\r\n    },\r\n    data(){\r\n      return {\r\n      uploadedCount:0,\r\n      totalFiles:0,\r\n      totalSize:0,\r\n      uploadPercentage:10,\r\n      files:[],\r\n      additionalData: {\r\n        uploadpath:this.$store.state.DirPath\r\n      }\r\n      \r\n    }\r\n    },\r\n    methods:{\r\n      SuLvZhuangHuang(i){\r\n    if (i < 1024) {\r\nreturn i.toFixed(2) + ' B/s';\r\n} else if (i < 1024 * 1024) {\r\nreturn (i / 1024).toFixed(2) + ' KB/s';\r\n} else if (i < 1024 * 1024 * 1024) {\r\nreturn (i / (1024 * 1024)).toFixed(2) + ' MB/s';\r\n} else {\r\nreturn (i / (1024 * 1024 * 1024)).toFixed(2) + ' GB/s';\r\n}\r\n},\r\n      inputFile(newl){\r\n  // for(let i=0;i<this.$store.state.files.length;i++)\r\n        // if( this.$store.state.files[i].size !==0){\r\n          //  console.log(this.$store.state.files[i].response);\r\n        // }l\r\n\r\n        console.log(this.$store.state.files);\r\n        this.$store.state.files= this.files\r\n         \r\n           if(newl.error!=''){\r\n            ElNotification({\r\n                    title: '错误',\r\n                    message: newl.error,\r\n                    duration: 0,\r\n                  })\r\n           }\r\n           if(newl.success==true){\r\n            ElNotification({\r\n                    title: '成功',\r\n                    message: newl.progress,\r\n                    duration: 3000,\r\n                  })\r\n            \r\n            axios({\r\n            url:this.$store.state.api+'/DirsFileList',\r\n            method:\"post\",\r\n            params:{\r\n                            'DirsFileList':this.$store.state.DirPath\r\n                        },\r\n        }).then(res=>{\r\n            console.log(res.data.data);\r\n            this.$store.state.DirsFileList=res.data.data\r\n            for(let i=0;i<this.$store.state.DirsFileList.length;i++){\r\n            this.$store.state.DirsFileList[i]={'index':i,'data':this.$store.state.DirsFileList[i],\"FileType\":false}\r\n            axios({\r\n                url:this.$store.state.api+\"/OpenDir\",\r\n                method:'post',\r\n            }).then(res=>{\r\n                let h=Object.values(res.data.su)\r\n                for(let i=0;i<this.$store.state.DirsFileList.length;i++){\r\n                    for(let j=0;j<=h.length;j++){\r\n                        if(this.$store.state.DirsFileList[i].data==h[j]){\r\n                            this.$store.state.DirsFileList[i].FileType='文件夹'\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                    \r\n            }) \r\n        }\r\n        })\r\n        }\r\n                \r\n                \r\n        \r\n},\r\n      startUpload(){\r\n      for(let i=0;i<this.$store.state.files.length;i++)\r\n        if( this.$store.state.files[i].size !==0){\r\n          this.$refs.upload.active = true\r\n           this.$store.state.FilesTyoes='进度条'\r\n           this.$store.state.files[i].progress=Number(this.$store.state.files[i].progress)\r\n          \r\n        }\r\n        console.log(this.files);\r\n        \r\n \r\n      },\r\n      fiel(){\r\n        for(let i=0;i<this.$store.state.files.length;i++)\r\n          if( this.$store.state.files[i].size !==0){\r\n          this.$store.state.files[i].size=Number(this.$store.state.files[i].size)\r\n\r\n        }\r\n        \r\n      },\r\n      clearFiles(files){\r\n        if(this.files.length!=0){\r\n          this.$refs.upload.remove(files)\r\n          this.$store.state.files=[]\r\n        }\r\n         \r\n      },\r\n      \r\n    \r\n    \r\n    }\r\n   \r\n  }\r\n</script>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}