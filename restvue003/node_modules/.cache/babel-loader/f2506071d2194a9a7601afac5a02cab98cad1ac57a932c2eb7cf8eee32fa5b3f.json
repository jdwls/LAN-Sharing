{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/*!\r\n Name: vue-upload-component \r\nComponent URI: https://github.com/lian-yue/vue-upload-component#readme \r\nVersion: 3.1.7 \r\nAuthor: LianYue \r\nLicense: Apache-2.0 \r\nDescription: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter \r\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('vue')) : typeof define === 'function' && define.amd ? define(['vue'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.VueUploadComponent = factory(global.Vue));\n})(this, function (vue) {\n  'use strict';\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n    return arr2;\n  }\n  function _ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      enumerableOnly && (symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      })), keys.push.apply(keys, symbols);\n    }\n    return keys;\n  }\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = null != arguments[i] ? arguments[i] : {};\n      i % 2 ? _ownKeys(Object(source), !0).forEach(function (key) {\n        _defineProperty2(target, key, source[key]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : _ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n    return target;\n  }\n  function _defineProperty2(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    }, _typeof(obj);\n  }\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      enumerableOnly && (symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      })), keys.push.apply(keys, symbols);\n    }\n    return keys;\n  }\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = null != arguments[i] ? arguments[i] : {};\n      i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n    return target;\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  /**\r\n   * Creates a XHR request\r\n   *\r\n   * @param {Object} options\r\n   */\n\n  var createRequest = function createRequest(options) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(options.method || 'GET', options.url);\n    xhr.responseType = 'json';\n    if (options.headers) {\n      Object.keys(options.headers).forEach(function (key) {\n        xhr.setRequestHeader(key, options.headers[key]);\n      });\n    }\n    return xhr;\n  };\n  /**\r\n   * Sends a XHR request with certain body\r\n   *\r\n   * @param {XMLHttpRequest} xhr\r\n   * @param {Object} body\r\n   */\n\n  var sendRequest = function sendRequest(xhr, body) {\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n      xhr.send(JSON.stringify(body));\n    });\n  };\n  /**\r\n   * Sends a XHR request with certain form data\r\n   *\r\n   * @param {XMLHttpRequest} xhr\r\n   * @param {Object} data\r\n   */\n\n  var sendFormRequest = function sendFormRequest(xhr, data) {\n    var body = new FormData();\n    for (var name in data) {\n      body.append(name, data[name]);\n    }\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n      xhr.send(body);\n    });\n  };\n  /**\r\n   * Creates and sends XHR request\r\n   *\r\n   * @param {Object} options\r\n   *\r\n   * @returns Promise\r\n   */\n\n  function request(options) {\n    var xhr = createRequest(options);\n    return sendRequest(xhr, options.body);\n  }\n  var ChunkUploadHandler = /*#__PURE__*/function () {\n    /**\r\n     * Constructor\r\n     *\r\n     * @param {File} file\r\n     * @param {Object} options\r\n     */\n    function ChunkUploadHandler(file, options) {\n      _classCallCheck(this, ChunkUploadHandler);\n      this.file = file;\n      this.options = options;\n      this.chunks = [];\n      this.sessionId = null;\n      this.chunkSize = null;\n      this.speedInterval = null;\n    }\n    /**\r\n     * Gets the max retries from options\r\n     */\n\n    _createClass(ChunkUploadHandler, [{\n      key: \"maxRetries\",\n      get: function get() {\n        return parseInt(this.options.maxRetries, 10);\n      }\n      /**\r\n       * Gets the max number of active chunks being uploaded at once from options\r\n       */\n    }, {\n      key: \"maxActiveChunks\",\n      get: function get() {\n        return parseInt(this.options.maxActive, 10);\n      }\n      /**\r\n       * Gets the file type\r\n       */\n    }, {\n      key: \"fileType\",\n      get: function get() {\n        return this.file.type;\n      }\n      /**\r\n       * Gets the file size\r\n       */\n    }, {\n      key: \"fileSize\",\n      get: function get() {\n        return this.file.size;\n      }\n      /**\r\n       * Gets the file name\r\n       */\n    }, {\n      key: \"fileName\",\n      get: function get() {\n        return this.file.name;\n      }\n      /**\r\n       * Gets action (url) to upload the file\r\n       */\n    }, {\n      key: \"action\",\n      get: function get() {\n        return this.options.action || null;\n      }\n      /**\r\n       * Gets the body to be merged when sending the request in start phase\r\n       */\n    }, {\n      key: \"startBody\",\n      get: function get() {\n        return this.options.startBody || {};\n      }\n      /**\r\n       * Gets the body to be merged when sending the request in upload phase\r\n       */\n    }, {\n      key: \"uploadBody\",\n      get: function get() {\n        return this.options.uploadBody || {};\n      }\n      /**\r\n       * Gets the body to be merged when sending the request in finish phase\r\n       */\n    }, {\n      key: \"finishBody\",\n      get: function get() {\n        return this.options.finishBody || {};\n      }\n      /**\r\n       * Gets the headers of the requests from options\r\n       */\n    }, {\n      key: \"headers\",\n      get: function get() {\n        return this.options.headers || {};\n      }\n      /**\r\n       * Whether it's ready to upload files or not\r\n       */\n    }, {\n      key: \"readyToUpload\",\n      get: function get() {\n        return !!this.chunks;\n      }\n      /**\r\n       * Gets the progress of the chunk upload\r\n       * - Gets all the completed chunks\r\n       * - Gets the progress of all the chunks that are being uploaded\r\n       */\n    }, {\n      key: \"progress\",\n      get: function get() {\n        var _this = this;\n        var completedProgress = this.chunksUploaded.length / this.chunks.length * 100;\n        var uploadingProgress = this.chunksUploading.reduce(function (progress, chunk) {\n          return progress + (chunk.progress | 0) / _this.chunks.length;\n        }, 0);\n        return Math.min(completedProgress + uploadingProgress, 100);\n      }\n      /**\r\n       * Gets all the chunks that are pending to be uploaded\r\n       */\n    }, {\n      key: \"chunksToUpload\",\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !chunk.active && !chunk.uploaded;\n        });\n      }\n      /**\r\n       * Whether there are chunks to upload or not\r\n       */\n    }, {\n      key: \"hasChunksToUpload\",\n      get: function get() {\n        return this.chunksToUpload.length > 0;\n      }\n      /**\r\n       * Gets all the chunks that are uploading\r\n       */\n    }, {\n      key: \"chunksUploading\",\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.xhr && !!chunk.active;\n        });\n      }\n      /**\r\n       * Gets all the chunks that have finished uploading\r\n       */\n    }, {\n      key: \"chunksUploaded\",\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.uploaded;\n        });\n      }\n      /**\r\n       * Creates all the chunks in the initial state\r\n       */\n    }, {\n      key: \"createChunks\",\n      value: function createChunks() {\n        this.chunks = [];\n        var start = 0;\n        var end = this.chunkSize;\n        while (start < this.fileSize) {\n          this.chunks.push({\n            blob: this.file.file.slice(start, end),\n            startOffset: start,\n            active: false,\n            retries: this.maxRetries\n          });\n          start = end;\n          end = start + this.chunkSize;\n        }\n      }\n      /**\r\n       * Updates the progress of the file with the handler's progress\r\n       */\n    }, {\n      key: \"updateFileProgress\",\n      value: function updateFileProgress() {\n        this.file.progress = this.progress;\n      }\n      /**\r\n       * Paues the upload process\r\n       * - Stops all active requests\r\n       * - Sets the file not active\r\n       */\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.file.active = false;\n        this.stopChunks();\n      }\n      /**\r\n       * Stops all the current chunks\r\n       */\n    }, {\n      key: \"stopChunks\",\n      value: function stopChunks() {\n        this.chunksUploading.forEach(function (chunk) {\n          chunk.xhr.abort();\n          chunk.active = false;\n        });\n        this.stopSpeedCalc();\n      }\n      /**\r\n       * Resumes the file upload\r\n       * - Sets the file active\r\n       * - Starts the following chunks\r\n       */\n    }, {\n      key: \"resume\",\n      value: function resume() {\n        this.file.active = true;\n        this.startChunking();\n      }\n      /**\r\n       * Starts the file upload\r\n       *\r\n       * @returns Promise\r\n       * - resolve  The file was uploaded\r\n       * - reject   The file upload failed\r\n       */\n    }, {\n      key: \"upload\",\n      value: function upload() {\n        var _this2 = this;\n        this.promise = new Promise(function (resolve, reject) {\n          _this2.resolve = resolve;\n          _this2.reject = reject;\n        });\n        this.start();\n        return this.promise;\n      }\n      /**\r\n       * Start phase\r\n       * Sends a request to the backend to initialise the chunks\r\n       */\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this3 = this;\n        request({\n          method: 'POST',\n          headers: _objectSpread2(_objectSpread2({}, this.headers), {}, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: Object.assign(this.startBody, {\n            phase: 'start',\n            mime_type: this.fileType,\n            size: this.fileSize,\n            name: this.fileName\n          })\n        }).then(function (res) {\n          if (res.status !== 'success') {\n            _this3.file.response = res;\n            return _this3.reject('server');\n          }\n          _this3.sessionId = res.data.session_id;\n          _this3.chunkSize = res.data.end_offset;\n          _this3.createChunks();\n          _this3.startChunking();\n        }).catch(function (res) {\n          _this3.file.response = res;\n          _this3.reject('server');\n        });\n      }\n      /**\r\n       * Starts to upload chunks\r\n       */\n    }, {\n      key: \"startChunking\",\n      value: function startChunking() {\n        for (var i = 0; i < this.maxActiveChunks; i++) {\n          this.uploadNextChunk();\n        }\n        this.startSpeedCalc();\n      }\n      /**\r\n       * Uploads the next chunk\r\n       * - Won't do anything if the process is paused\r\n       * - Will start finish phase if there are no more chunks to upload\r\n       */\n    }, {\n      key: \"uploadNextChunk\",\n      value: function uploadNextChunk() {\n        if (this.file.active) {\n          if (this.hasChunksToUpload) {\n            return this.uploadChunk(this.chunksToUpload[0]);\n          }\n          if (this.chunksUploading.length === 0) {\n            return this.finish();\n          }\n        }\n      }\n      /**\r\n       * Uploads a chunk\r\n       * - Sends the chunk to the backend\r\n       * - Sets the chunk as uploaded if everything went well\r\n       * - Decreases the number of retries if anything went wrong\r\n       * - Fails if there are no more retries\r\n       *\r\n       * @param {Object} chunk\r\n       */\n    }, {\n      key: \"uploadChunk\",\n      value: function uploadChunk(chunk) {\n        var _this4 = this;\n        chunk.progress = 0;\n        chunk.active = true;\n        this.updateFileProgress();\n        chunk.xhr = createRequest({\n          method: 'POST',\n          headers: this.headers,\n          url: this.action\n        });\n        chunk.xhr.upload.addEventListener('progress', function (evt) {\n          if (evt.lengthComputable) {\n            chunk.progress = Math.round(evt.loaded / evt.total * 100);\n          }\n        }, false);\n        sendFormRequest(chunk.xhr, Object.assign(this.uploadBody, {\n          phase: 'upload',\n          session_id: this.sessionId,\n          start_offset: chunk.startOffset,\n          chunk: chunk.blob\n        })).then(function (res) {\n          chunk.active = false;\n          if (res.status === 'success') {\n            chunk.uploaded = true;\n          } else {\n            if (chunk.retries-- <= 0) {\n              _this4.stopChunks();\n              return _this4.reject('upload');\n            }\n          }\n          _this4.uploadNextChunk();\n        }).catch(function () {\n          chunk.active = false;\n          if (chunk.retries-- <= 0) {\n            _this4.stopChunks();\n            return _this4.reject('upload');\n          }\n          _this4.uploadNextChunk();\n        });\n      }\n      /**\r\n       * Finish phase\r\n       * Sends a request to the backend to finish the process\r\n       */\n    }, {\n      key: \"finish\",\n      value: function finish() {\n        var _this5 = this;\n        this.updateFileProgress();\n        this.stopSpeedCalc();\n        request({\n          method: 'POST',\n          headers: _objectSpread2(_objectSpread2({}, this.headers), {}, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: Object.assign(this.finishBody, {\n            phase: 'finish',\n            session_id: this.sessionId\n          })\n        }).then(function (res) {\n          _this5.file.response = res;\n          if (res.status !== 'success') {\n            return _this5.reject('server');\n          }\n          _this5.resolve(res);\n        }).catch(function (res) {\n          _this5.file.response = res;\n          _this5.reject('server');\n        });\n      }\n      /**\r\n       * Sets an interval to calculate and\r\n       * set upload speed every 3 seconds\r\n       */\n    }, {\n      key: \"startSpeedCalc\",\n      value: function startSpeedCalc() {\n        var _this6 = this;\n        this.file.speed = 0;\n        var lastUploadedBytes = 0;\n        if (!this.speedInterval) {\n          this.speedInterval = window.setInterval(function () {\n            var uploadedBytes = _this6.progress / 100 * _this6.fileSize;\n            _this6.file.speed = uploadedBytes - lastUploadedBytes;\n            lastUploadedBytes = uploadedBytes;\n          }, 1000);\n        }\n      }\n      /**\r\n       * Removes the upload speed interval\r\n       */\n    }, {\n      key: \"stopSpeedCalc\",\n      value: function stopSpeedCalc() {\n        this.speedInterval && window.clearInterval(this.speedInterval);\n        this.speedInterval = null;\n        this.file.speed = 0;\n      }\n    }]);\n    return ChunkUploadHandler;\n  }();\n  var CHUNK_DEFAULT_OPTIONS = {\n    headers: {},\n    action: '',\n    minSize: 1048576,\n    maxActive: 3,\n    maxRetries: 5,\n    handler: ChunkUploadHandler\n  };\n  var script = vue.defineComponent({\n    props: {\n      inputId: {\n        type: String\n      },\n      name: {\n        type: String,\n        default: 'file'\n      },\n      accept: {\n        type: String\n      },\n      capture: {},\n      disabled: {\n        default: false\n      },\n      multiple: {\n        type: Boolean,\n        default: false\n      },\n      maximum: {\n        type: Number\n      },\n      addIndex: {\n        type: [Boolean, Number]\n      },\n      directory: {\n        type: Boolean\n      },\n      createDirectory: {\n        type: Boolean,\n        default: false\n      },\n      postAction: {\n        type: String\n      },\n      putAction: {\n        type: String\n      },\n      customAction: {\n        type: Function\n      },\n      headers: {\n        type: Object,\n        default: function _default() {\n          return {};\n        }\n      },\n      data: {\n        type: Object,\n        default: function _default() {\n          return {};\n        }\n      },\n      timeout: {\n        type: Number,\n        default: 0\n      },\n      drop: {\n        type: [Boolean, String, HTMLElement],\n        default: function _default() {\n          return false;\n        }\n      },\n      dropDirectory: {\n        type: Boolean,\n        default: true\n      },\n      size: {\n        type: Number,\n        default: 0\n      },\n      extensions: {\n        type: [RegExp, String, Array],\n        default: function _default() {\n          return [];\n        }\n      },\n      modelValue: {\n        type: Array,\n        default: function _default() {\n          return [];\n        }\n      },\n      thread: {\n        type: Number,\n        default: 1\n      },\n      // Chunk upload enabled\n      chunkEnabled: {\n        type: Boolean,\n        default: false\n      },\n      // Chunk upload properties\n      chunk: {\n        type: Object,\n        default: function _default() {\n          return CHUNK_DEFAULT_OPTIONS;\n        }\n      }\n    },\n    emits: ['update:modelValue', 'input-filter', 'input-file'],\n    data: function data() {\n      return {\n        files: this.modelValue,\n        features: {\n          html5: true,\n          directory: false,\n          drop: false\n        },\n        active: false,\n        dropActive: false,\n        uploading: 0,\n        destroy: false,\n        maps: {},\n        dropElement: null,\n        dropTimeout: null,\n        reload: false\n      };\n    },\n    /**\r\n     * mounted\r\n     * @return {[type]} [description]\r\n     */\n    mounted: function mounted() {\n      var _this7 = this;\n      var input = document.createElement('input');\n      input.type = 'file';\n      input.multiple = true; // html5 特征\n\n      if (window.FormData && input.files) {\n        // 上传目录特征\n        // @ts-ignore\n        if (typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean') {\n          this.features.directory = true;\n        } // 拖拽特征\n\n        if (this.features.html5 && typeof input.ondrop !== 'undefined') {\n          this.features.drop = true;\n        }\n      } else {\n        this.features.html5 = false;\n      } // files 定位缓存\n\n      this.maps = {};\n      if (this.files) {\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        }\n      } // @ts-ignore\n\n      this.$nextTick(function () {\n        // 更新下父级\n        if (_this7.$parent) {\n          _this7.$parent.$forceUpdate(); // 拖拽渲染\n\n          _this7.$parent.$nextTick(function () {\n            _this7.watchDrop(_this7.drop);\n          });\n        } else {\n          // 拖拽渲染\n          _this7.watchDrop(_this7.drop);\n        }\n      });\n    },\n    /**\r\n     * beforeUnmount\r\n     * @return {[type]} [description]\r\n     */\n    beforeUnmount: function beforeUnmount() {\n      // 已销毁\n      this.destroy = true; // 设置成不激活\n\n      this.active = false; // 销毁拖拽事件\n\n      this.watchDrop(false); // 销毁不激活\n\n      this.watchActive(false);\n    },\n    computed: {\n      /**\r\n       * uploading 正在上传的线程\r\n       * @return {[type]} [description]\r\n       */\n\n      /**\r\n       * uploaded 文件列表是否全部已上传\r\n       * @return {[type]} [description]\r\n       */\n      uploaded: function uploaded() {\n        var file;\n        for (var i = 0; i < this.files.length; i++) {\n          file = this.files[i];\n          if (file.fileObject && !file.error && !file.success) {\n            return false;\n          }\n        }\n        return true;\n      },\n      chunkOptions: function chunkOptions() {\n        return Object.assign(CHUNK_DEFAULT_OPTIONS, this.chunk);\n      },\n      className: function className() {\n        return ['file-uploads', this.features.html5 ? 'file-uploads-html5' : 'file-uploads-html4', this.features.directory && this.directory ? 'file-uploads-directory' : undefined, this.features.drop && this.drop ? 'file-uploads-drop' : undefined, this.disabled ? 'file-uploads-disabled' : undefined];\n      },\n      forId: function forId() {\n        return this.inputId || this.name;\n      },\n      iMaximum: function iMaximum() {\n        if (this.maximum === undefined) {\n          return this.multiple ? 0 : 1;\n        }\n        return this.maximum;\n      },\n      iExtensions: function iExtensions() {\n        if (!this.extensions) {\n          return;\n        }\n        if (this.extensions instanceof RegExp) {\n          return this.extensions;\n        }\n        if (!this.extensions.length) {\n          return;\n        }\n        var exts = [];\n        if (typeof this.extensions === 'string') {\n          exts = this.extensions.split(',');\n        } else {\n          exts = this.extensions;\n        }\n        exts = exts.map(function (value) {\n          return value.trim();\n        }).filter(function (value) {\n          return value;\n        });\n        return new RegExp('\\\\.(' + exts.join('|').replace(/\\./g, '\\\\.') + ')$', 'i');\n      },\n      iDirectory: function iDirectory() {\n        if (this.directory && this.features.directory) {\n          return true;\n        }\n        return undefined;\n      }\n    },\n    watch: {\n      active: function active(_active) {\n        this.watchActive(_active);\n      },\n      dropActive: function dropActive(value) {\n        this.watchDropActive(value);\n        if (this.$parent) {\n          this.$parent.$forceUpdate();\n        }\n      },\n      drop: function drop(value) {\n        this.watchDrop(value);\n      },\n      modelValue: function modelValue(files) {\n        if (this.files === files) {\n          return;\n        }\n        this.files = files;\n        var oldMaps = this.maps; // 重写 maps 缓存\n\n        this.maps = {};\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        } // add, update\n\n        for (var key in this.maps) {\n          var newFile = this.maps[key];\n          var oldFile = oldMaps[key];\n          if (newFile !== oldFile) {\n            this.emitFile(newFile, oldFile);\n          }\n        } // delete\n\n        for (var _key in oldMaps) {\n          if (!this.maps[_key]) {\n            this.emitFile(undefined, oldMaps[_key]);\n          }\n        }\n      }\n    },\n    methods: {\n      newId: function newId() {\n        return Math.random().toString(36).substr(2);\n      },\n      // 清空\n      clear: function clear() {\n        if (this.files.length) {\n          var files = this.files;\n          this.files = []; // 定位\n\n          this.maps = {}; // 事件\n\n          this.emitInput();\n          for (var i = 0; i < files.length; i++) {\n            this.emitFile(undefined, files[i]);\n          }\n        }\n        return true;\n      },\n      // 选择\n      get: function get(id) {\n        if (!id) {\n          return false;\n        }\n        if (_typeof(id) === 'object') {\n          return this.maps[id.id || ''] || false;\n        }\n        return this.maps[id] || false;\n      },\n      // 添加\n      add: function add(_files, index) {\n        // 不是数组整理成数组\n        var files;\n        if (_files instanceof Array) {\n          files = _files;\n        } else {\n          files = [_files];\n        }\n        if (index === undefined) {\n          // eslint-disable-next-line\n          index = this.addIndex;\n        } // 遍历规范对象\n\n        var addFiles = [];\n        for (var i = 0; i < files.length; i++) {\n          var file = files[i];\n          if (this.features.html5 && file instanceof Blob) {\n            file = {\n              id: '',\n              file: file,\n              size: file.size,\n              // @ts-ignore\n              name: file.webkitRelativePath || file.relativePath || file.name || 'unknown',\n              type: file.type\n            };\n          }\n          file = file;\n          var fileObject = false;\n          if (file.fileObject === false) ;else if (file.fileObject) {\n            fileObject = true;\n          } else if (typeof Element !== 'undefined' && file.el instanceof HTMLInputElement) {\n            fileObject = true;\n          } else if (typeof Blob !== 'undefined' && file.file instanceof Blob) {\n            fileObject = true;\n          }\n          if (fileObject) {\n            file = _objectSpread(_objectSpread({\n              fileObject: true,\n              size: -1,\n              name: 'Filename',\n              type: '',\n              active: false,\n              error: '',\n              success: false,\n              putAction: this.putAction,\n              postAction: this.postAction,\n              timeout: this.timeout\n            }, file), {}, {\n              response: {},\n              progress: '0.00',\n              speed: 0 // 只读\n              // file: undefined,\n              // xhr: undefined,\n              // el: undefined,\n              // iframe: undefined,\n            });\n            file.data = _objectSpread(_objectSpread({}, this.data), file.data ? file.data : {});\n            file.headers = _objectSpread(_objectSpread({}, this.headers), file.headers ? file.headers : {});\n          } // 必须包含 id\n\n          if (!file.id) {\n            file.id = this.newId();\n          }\n          if (this.emitFilter(file, undefined)) {\n            continue;\n          } // 最大数量限制\n\n          if (this.iMaximum > 1 && addFiles.length + this.files.length >= this.iMaximum) {\n            break;\n          }\n          addFiles.push(file); // 最大数量限制\n\n          if (this.iMaximum === 1) {\n            break;\n          }\n        } // 没有文件\n\n        if (!addFiles.length) {\n          return;\n        } // 如果是 1 清空\n\n        if (this.iMaximum === 1) {\n          this.clear();\n        } // 添加进去 files\n\n        var newFiles;\n        if (index === true || index === 0) {\n          newFiles = addFiles.concat(this.files);\n        } else if (index) {\n          var _newFiles;\n          newFiles = this.files.concat([]);\n          (_newFiles = newFiles).splice.apply(_newFiles, [index, 0].concat(_toConsumableArray(addFiles)));\n        } else {\n          newFiles = this.files.concat(addFiles);\n        }\n        this.files = newFiles; // 读取代理后的数据\n\n        var index2 = 0;\n        if (index === true || index === 0) {\n          index2 = 0;\n        } else if (index) {\n          if (index >= 0) {\n            if (index + addFiles.length > this.files.length) {\n              index2 = this.files.length - addFiles.length;\n            } else {\n              index2 = index;\n            }\n          } else {\n            index2 = this.files.length - addFiles.length + index;\n            if (index2 < 0) {\n              index2 = 0;\n            }\n          }\n        } else {\n          index2 = this.files.length - addFiles.length;\n        }\n        addFiles = this.files.slice(index2, index2 + addFiles.length); // 定位\n\n        for (var _i = 0; _i < addFiles.length; _i++) {\n          var _file = addFiles[_i];\n          this.maps[_file.id] = _file;\n        } // 事件\n\n        this.emitInput();\n        for (var _i2 = 0; _i2 < addFiles.length; _i2++) {\n          this.emitFile(addFiles[_i2], undefined);\n        }\n        return _files instanceof Array ? addFiles : addFiles[0];\n      },\n      // 添加表单文件\n      addInputFile: function addInputFile(el) {\n        var _this8 = this;\n        var files = [];\n        this.iMaximum; // @ts-ignore\n\n        var entrys = el.webkitEntries || el.entries || undefined;\n        if (entrys !== null && entrys !== void 0 && entrys.length) {\n          return this.getFileSystemEntry(entrys).then(function (files) {\n            return _this8.add(files);\n          });\n        }\n        if (el.files) {\n          for (var i = 0; i < el.files.length; i++) {\n            var file = el.files[i];\n            files.push({\n              id: '',\n              size: file.size,\n              // @ts-ignore\n              name: file.webkitRelativePath || file.relativePath || file.name,\n              type: file.type,\n              file: file\n            });\n          }\n        } else {\n          var names = el.value.replace(/\\\\/g, '/').split('/');\n          if (!names || !names.length) {\n            names = [el.value];\n          } // @ts-ignore\n\n          delete el.__vuex__;\n          files.push({\n            id: '',\n            name: names[names.length - 1],\n            el: el\n          });\n        }\n        return Promise.resolve(this.add(files));\n      },\n      // 添加 DataTransfer\n      addDataTransfer: function addDataTransfer(dataTransfer) {\n        var _dataTransfer$items,\n          _this9 = this;\n\n        // dataTransfer.items 支持\n        if (dataTransfer !== null && dataTransfer !== void 0 && (_dataTransfer$items = dataTransfer.items) !== null && _dataTransfer$items !== void 0 && _dataTransfer$items.length) {\n          var entrys = []; // 遍历出所有 dataTransferVueUploadItem\n\n          for (var i = 0; i < dataTransfer.items.length; i++) {\n            var dataTransferTtem = dataTransfer.items[i];\n            var entry = void 0; // @ts-ignore\n\n            if (dataTransferTtem.getAsEntry) {\n              // @ts-ignore\n              entry = dataTransferTtem.getAsEntry() || dataTransferTtem.getAsFile();\n            } else if (dataTransferTtem.webkitGetAsEntry) {\n              entry = dataTransferTtem.webkitGetAsEntry() || dataTransferTtem.getAsFile();\n            } else {\n              entry = dataTransferTtem.getAsFile();\n            }\n            if (entry) {\n              entrys.push(entry);\n            }\n          }\n          return this.getFileSystemEntry(entrys).then(function (files) {\n            return _this9.add(files);\n          });\n        } // dataTransfer.files 支持\n\n        var maximumValue = this.iMaximum;\n        var files = [];\n        if (dataTransfer.files.length) {\n          for (var _i3 = 0; _i3 < dataTransfer.files.length; _i3++) {\n            files.push(dataTransfer.files[_i3]);\n            if (maximumValue > 0 && files.length >= maximumValue) {\n              break;\n            }\n          }\n          return Promise.resolve(this.add(files));\n        }\n        return Promise.resolve([]);\n      },\n      // 获得 entrys    \n      getFileSystemEntry: function getFileSystemEntry(entry) {\n        var _this10 = this;\n        var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        // getFileSystemEntry(entry: any, path = ''): Promise<VueUploadItem[]> {\n        return new Promise(function (resolve) {\n          var maximumValue = _this10.iMaximum;\n          if (!entry) {\n            resolve([]);\n            return;\n          }\n          if (entry instanceof Array) {\n            // 多个\n            var uploadFiles = [];\n            var forEach = function forEach(i) {\n              var v = entry[i];\n              if (!v || maximumValue > 0 && uploadFiles.length >= maximumValue) {\n                return resolve(uploadFiles);\n              }\n              _this10.getFileSystemEntry(v, path).then(function (results) {\n                uploadFiles.push.apply(uploadFiles, _toConsumableArray(results));\n                forEach(i + 1);\n              });\n            };\n            forEach(0);\n            return;\n          }\n          if (entry instanceof Blob) {\n            resolve([{\n              id: '',\n              size: entry.size,\n              // @ts-ignore\n              name: path + entry.name,\n              type: entry.type,\n              file: entry\n            }]);\n            return;\n          }\n          if (entry.isFile) {\n            var fileEntry = entry;\n            fileEntry.file(function (file) {\n              resolve([{\n                id: '',\n                size: file.size,\n                name: path + file.name,\n                type: file.type,\n                file: file\n              }]);\n            });\n            return;\n          }\n          if (entry.isDirectory && _this10.dropDirectory) {\n            var directoryEntry = entry;\n            var _uploadFiles = []; // 目录也要添加到文件列表\n\n            if (_this10.createDirectory) {\n              _uploadFiles.push({\n                id: '',\n                name: path + directoryEntry.name,\n                size: 0,\n                type: 'text/directory',\n                file: new File([], path + directoryEntry.name, {\n                  type: 'text/directory'\n                })\n              });\n            }\n            var dirReader = directoryEntry.createReader();\n            var readEntries = function readEntries() {\n              dirReader.readEntries(function (entries) {\n                var forEach = function forEach(i) {\n                  if (!entries[i] && i === 0 || maximumValue > 0 && _uploadFiles.length >= maximumValue) {\n                    return resolve(_uploadFiles);\n                  }\n                  if (!entries[i]) {\n                    return readEntries();\n                  }\n                  _this10.getFileSystemEntry(entries[i], path + directoryEntry.name + '/').then(function (results) {\n                    _uploadFiles.push.apply(_uploadFiles, _toConsumableArray(results));\n                    forEach(i + 1);\n                  });\n                };\n                forEach(0);\n              });\n            };\n            readEntries();\n            return;\n          }\n          resolve([]);\n        });\n      },\n      // 替换\n      replace: function replace(id1, id2) {\n        var file1 = this.get(id1);\n        var file2 = this.get(id2);\n        if (!file1 || !file2 || file1 === file2) {\n          return false;\n        }\n        var files = this.files.concat([]);\n        var index1 = files.indexOf(file1);\n        var index2 = files.indexOf(file2);\n        if (index1 === -1 || index2 === -1) {\n          return false;\n        }\n        files[index1] = file2;\n        files[index2] = file1;\n        this.files = files;\n        this.emitInput();\n        return true;\n      },\n      // 移除\n      remove: function remove(id) {\n        var file = this.get(id);\n        if (file) {\n          if (this.emitFilter(undefined, file)) {\n            return false;\n          }\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n          if (index === -1) {\n            console.error('remove', file);\n            return false;\n          }\n          files.splice(index, 1);\n          this.files = files; // 定位\n\n          delete this.maps[file.id]; // 事件\n\n          this.emitInput();\n          this.emitFile(undefined, file);\n        }\n        return file;\n      },\n      // 更新\n      update: function update(id, data) {\n        var file = this.get(id);\n        if (file) {\n          var newFile = _objectSpread(_objectSpread({}, file), data); // 停用必须加上错误\n\n          if (file.fileObject && file.active && !newFile.active && !newFile.error && !newFile.success) {\n            newFile.error = 'abort';\n          }\n          if (this.emitFilter(newFile, file)) {\n            return false;\n          }\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n          if (index === -1) {\n            console.error('update', file);\n            return false;\n          }\n          files.splice(index, 1, newFile);\n          this.files = files;\n          newFile = this.files[index]; // 删除  旧定位 写入 新定位 （已便支持修改id)\n\n          delete this.maps[file.id];\n          this.maps[newFile.id] = newFile; // 事件\n\n          this.emitInput();\n          this.emitFile(newFile, file);\n          return newFile;\n        }\n        return false;\n      },\n      // 预处理 事件 过滤器\n      emitFilter: function emitFilter(newFile, oldFile) {\n        var isPrevent = false;\n        this.$emit('input-filter', newFile, oldFile, function () {\n          var prevent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n          isPrevent = prevent;\n          return isPrevent;\n        });\n        return isPrevent;\n      },\n      // 处理后 事件 分发\n      emitFile: function emitFile(newFile, oldFile) {\n        var _newFile,\n          _this11 = this;\n        this.$emit('input-file', newFile, oldFile);\n        if ((_newFile = newFile) !== null && _newFile !== void 0 && _newFile.fileObject && newFile.active && (!oldFile || !oldFile.active)) {\n          this.uploading++; // 激活\n          // @ts-ignore\n\n          this.$nextTick(function () {\n            setTimeout(function () {\n              newFile && _this11.upload(newFile).then(function () {\n                var _newFile2;\n                if (newFile) {\n                  // eslint-disable-next-line\n                  newFile = _this11.get(newFile) || undefined;\n                }\n                if ((_newFile2 = newFile) !== null && _newFile2 !== void 0 && _newFile2.fileObject) {\n                  _this11.update(newFile, {\n                    active: false,\n                    success: !newFile.error\n                  });\n                }\n              }).catch(function (e) {\n                newFile && _this11.update(newFile, {\n                  active: false,\n                  success: false,\n                  error: e.code || e.error || e.message || e\n                });\n              });\n            }, Math.ceil(Math.random() * 50 + 50));\n          });\n        } else if ((!newFile || !newFile.fileObject || !newFile.active) && oldFile && oldFile.fileObject && oldFile.active) {\n          // 停止\n          this.uploading--;\n        } // 自动延续激活\n        // @ts-ignore\n\n        if (this.active && (Boolean(newFile) !== Boolean(oldFile) || newFile.active !== oldFile.active)) {\n          this.watchActive(true);\n        }\n      },\n      emitInput: function emitInput() {\n        this.$emit('update:modelValue', this.files);\n      },\n      // 上传\n      upload: function upload(id) {\n        var file = this.get(id); // 被删除\n\n        if (!file) {\n          return Promise.reject(new Error('not_exists'));\n        } // 不是文件对象\n\n        if (!file.fileObject) {\n          return Promise.reject(new Error('file_object'));\n        } // 有错误直接响应\n\n        if (file.error) {\n          if (file.error instanceof Error) {\n            return Promise.reject(file.error);\n          }\n          return Promise.reject(new Error(file.error));\n        } // 已完成直接响应\n\n        if (file.success) {\n          return Promise.resolve(file);\n        } // 后缀\n\n        if (file.name && this.iExtensions && file.type !== \"text/directory\") {\n          if (file.name.search(this.iExtensions) === -1) {\n            return Promise.reject(new Error('extension'));\n          }\n        } // 大小\n\n        if (this.size > 0 && file.size !== undefined && file.size >= 0 && file.size > this.size && file.type !== \"text/directory\") {\n          return Promise.reject(new Error('size'));\n        }\n        if (this.customAction) {\n          return this.customAction(file, this);\n        }\n        if (this.features.html5) {\n          if (this.shouldUseChunkUpload(file)) {\n            return this.uploadChunk(file);\n          }\n          if (file.putAction) {\n            return this.uploadPut(file);\n          }\n          if (file.postAction) {\n            return this.uploadHtml5(file);\n          }\n        }\n        if (file.postAction) {\n          return this.uploadHtml4(file);\n        }\n        return Promise.reject(new Error('No action configured'));\n      },\n      /**\r\n       * Whether this file should be uploaded using chunk upload or not\r\n       *\r\n       * @param Object file\r\n       */\n      shouldUseChunkUpload: function shouldUseChunkUpload(file) {\n        return this.chunkEnabled && !!this.chunkOptions.handler && file.size && file.size > this.chunkOptions.minSize;\n      },\n      /**\r\n       * Upload a file using Chunk method\r\n       *\r\n       * @param File file\r\n       */\n      uploadChunk: function uploadChunk(file) {\n        var HandlerClass = this.chunkOptions.handler;\n        file.chunk = new HandlerClass(file, this.chunkOptions);\n        return file.chunk.upload().then(function (res) {\n          return file;\n        });\n      },\n      uploadPut: function uploadPut(file) {\n        var querys = [];\n        var value;\n        for (var key in file.data) {\n          value = file.data[key];\n          if (value !== null && value !== undefined) {\n            querys.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n          }\n        }\n        var putAction = file.putAction || '';\n        var queryString = querys.length ? (putAction.indexOf('?') === -1 ? '?' : '&') + querys.join('&') : '';\n        var xhr = new XMLHttpRequest();\n        xhr.open('PUT', putAction + queryString);\n        return this.uploadXhr(xhr, file, file.file);\n      },\n      uploadHtml5: function uploadHtml5(file) {\n        var form = new window.FormData();\n        var value;\n        for (var key in file.data) {\n          value = file.data[key];\n          if (value && _typeof(value) === 'object' && typeof value.toString !== 'function') {\n            if (value instanceof File) {\n              form.append(key, value, value.name);\n            } else {\n              form.append(key, JSON.stringify(value));\n            }\n          } else if (value !== null && value !== undefined) {\n            form.append(key, value);\n          }\n        } // Moved file.name as the first option to set the filename of the uploaded file, since file.name\n        // contains the full (relative) path of the file not just the filename as in file.file.filename\n        // @ts-ignore\n\n        form.append(this.name, file.file, file.name || file.file.name || file.file.filename);\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', file.postAction || '');\n        return this.uploadXhr(xhr, file, form);\n      },\n      uploadXhr: function uploadXhr(xhr, ufile, body) {\n        var _this12 = this;\n        var file = ufile;\n        var speedTime = 0;\n        var speedLoaded = 0; // 进度条\n\n        xhr.upload.onprogress = function (e) {\n          // 还未开始上传 已删除 未激活\n          if (!file) {\n            return;\n          }\n          file = _this12.get(file);\n          if (!e.lengthComputable || !file || !file.fileObject || !file.active) {\n            return;\n          } // 进度 速度 每秒更新一次\n\n          var speedTime2 = Math.round(Date.now() / 1000);\n          if (speedTime2 === speedTime) {\n            return;\n          }\n          speedTime = speedTime2;\n          file = _this12.update(file, {\n            progress: (e.loaded / e.total * 100).toFixed(2),\n            speed: e.loaded - speedLoaded\n          });\n          speedLoaded = e.loaded;\n        }; // 检查激活状态\n\n        var interval = window.setInterval(function () {\n          if (file) {\n            if (file = _this12.get(file)) {\n              var _file2;\n              if ((_file2 = file) !== null && _file2 !== void 0 && _file2.fileObject && !file.success && !file.error && file.active) {\n                return;\n              }\n            }\n          }\n          if (interval) {\n            clearInterval(interval);\n            interval = undefined;\n          }\n          try {\n            xhr.abort();\n            xhr.timeout = 1;\n          } catch (e) {}\n        }, 100);\n        return new Promise(function (resolve, reject) {\n          if (!file) {\n            reject(new Error('not_exists'));\n            return;\n          }\n          var complete;\n          var fn = function fn(e) {\n            // 已经处理过了\n            if (complete) {\n              return;\n            }\n            complete = true;\n            if (interval) {\n              clearInterval(interval);\n              interval = undefined;\n            }\n            if (!file) {\n              return reject(new Error('not_exists'));\n            }\n            file = _this12.get(file); // 不存在直接响应\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            } // 不是文件对象\n\n            if (!file.fileObject) {\n              return reject(new Error('file_object'));\n            } // 有错误自动响应\n\n            if (file.error) {\n              if (file.error instanceof Error) {\n                return reject(file.error);\n              }\n              return reject(new Error(file.error));\n            } // 未激活\n\n            if (!file.active) {\n              return reject(new Error('abort'));\n            } // 已完成 直接相应\n\n            if (file.success) {\n              return resolve(file);\n            }\n            var data = {};\n            switch (e.type) {\n              case 'timeout':\n              case 'abort':\n                data.error = e.type;\n                break;\n              case 'error':\n                if (!xhr.status) {\n                  data.error = 'network';\n                } else if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                }\n                break;\n              default:\n                if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                } else {\n                  data.progress = '100.00';\n                }\n            }\n            if (xhr.responseText) {\n              var contentType = xhr.getResponseHeader('Content-Type');\n              if (contentType && contentType.indexOf('/json') !== -1) {\n                data.response = JSON.parse(xhr.responseText);\n              } else {\n                data.response = xhr.responseText;\n              }\n            } // 更新\n            // @ts-ignore\n\n            file = _this12.update(file, data);\n            if (!file) {\n              return reject(new Error('abort'));\n            } // 有错误自动响应\n\n            if (file.error) {\n              if (file.error instanceof Error) {\n                return reject(file.error);\n              }\n              return reject(new Error(file.error));\n            } // 响应\n\n            return resolve(file);\n          }; // 事件\n\n          xhr.onload = fn;\n          xhr.onerror = fn;\n          xhr.onabort = fn;\n          xhr.ontimeout = fn; // 超时\n\n          if (file.timeout) {\n            xhr.timeout = file.timeout;\n          } // headers\n\n          for (var key in file.headers) {\n            xhr.setRequestHeader(key, file.headers[key]);\n          } // 更新 xhr\n          // @ts-ignore\n\n          file = _this12.update(file, {\n            xhr: xhr\n          }); // 开始上传\n\n          file && xhr.send(body);\n        });\n      },\n      uploadHtml4: function uploadHtml4(ufile) {\n        var _this13 = this;\n        var file = ufile;\n        if (!file) {\n          return Promise.reject(new Error('not_exists'));\n        }\n        var onKeydown = function onKeydown(e) {\n          if (e.keyCode === 27) {\n            e.preventDefault();\n          }\n        };\n        var iframe = document.createElement('iframe');\n        iframe.id = 'upload-iframe-' + file.id;\n        iframe.name = 'upload-iframe-' + file.id;\n        iframe.src = 'about:blank';\n        iframe.setAttribute('style', 'width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;');\n        var form = document.createElement('form');\n        form.setAttribute('action', file.postAction || '');\n        form.name = 'upload-form-' + file.id;\n        form.setAttribute('method', 'POST');\n        form.setAttribute('target', 'upload-iframe-' + file.id);\n        form.setAttribute('enctype', 'multipart/form-data');\n        for (var key in file.data) {\n          var value = file.data[key];\n          if (value && _typeof(value) === 'object' && typeof value.toString !== 'function') {\n            value = JSON.stringify(value);\n          }\n          if (value !== null && value !== undefined) {\n            var el = document.createElement('input');\n            el.type = 'hidden';\n            el.name = key;\n            el.value = value;\n            form.appendChild(el);\n          }\n        }\n        form.appendChild(file.el);\n        document.body.appendChild(iframe).appendChild(form);\n        var getResponseData = function getResponseData() {\n          var _doc;\n          var doc;\n          try {\n            if (iframe.contentWindow) {\n              doc = iframe.contentWindow.document;\n            }\n          } catch (err) {}\n          if (!doc) {\n            try {\n              // @ts-ignore\n              doc = iframe.contentDocument ? iframe.contentDocument : iframe.document;\n            } catch (err) {\n              // @ts-ignore\n              doc = iframe.document;\n            }\n          } // @ts-ignore\n\n          if ((_doc = doc) !== null && _doc !== void 0 && _doc.body) {\n            return doc.body.innerHTML;\n          }\n          return null;\n        };\n        return new Promise(function (resolve, reject) {\n          setTimeout(function () {\n            if (!file) {\n              reject(new Error('not_exists'));\n              return;\n            }\n            file = _this13.update(file, {\n              iframe: iframe\n            }); // 不存在\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            } // 定时检查\n\n            var interval = window.setInterval(function () {\n              if (file) {\n                if (file = _this13.get(file)) {\n                  if (file.fileObject && !file.success && !file.error && file.active) {\n                    return;\n                  }\n                }\n              }\n              if (interval) {\n                clearInterval(interval);\n                interval = undefined;\n              } // @ts-ignore\n\n              iframe.onabort({\n                type: file ? 'abort' : 'not_exists'\n              });\n            }, 100);\n            var complete;\n            var fn = function fn(e) {\n              var _file3;\n\n              // 已经处理过了\n              if (complete) {\n                return;\n              }\n              complete = true;\n              if (interval) {\n                clearInterval(interval);\n                interval = undefined;\n              } // 关闭 esc 事件\n\n              document.body.removeEventListener('keydown', onKeydown);\n              if (!file) {\n                return reject(new Error('not_exists'));\n              }\n              file = _this13.get(file); // 不存在直接响应\n\n              if (!file) {\n                return reject(new Error('not_exists'));\n              } // 不是文件对象\n\n              if (!file.fileObject) {\n                return reject(new Error('file_object'));\n              } // 有错误自动响应\n\n              if (file.error) {\n                if (file.error instanceof Error) {\n                  return reject(file.error);\n                }\n                return reject(new Error(file.error));\n              } // 未激活\n\n              if (!file.active) {\n                return reject(new Error('abort'));\n              } // 已完成 直接相应\n\n              if (file.success) {\n                return resolve(file);\n              }\n              var response = getResponseData();\n              var data = {};\n              if (typeof e === 'string') {\n                return reject(new Error(e));\n              }\n              switch (e.type) {\n                case 'abort':\n                  data.error = 'abort';\n                  break;\n                case 'error':\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (response === null) {\n                    data.error = 'network';\n                  } else {\n                    data.error = 'denied';\n                  }\n                  break;\n                default:\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (response === null) {\n                    data.error = 'network';\n                  } else {\n                    data.progress = '100.00';\n                  }\n              }\n              if (response !== null) {\n                if (response && response.substr(0, 1) === '{' && response.substr(response.length - 1, 1) === '}') {\n                  try {\n                    response = JSON.parse(response);\n                  } catch (err) {}\n                }\n                data.response = response;\n              } // 更新\n\n              file = _this13.update(file, data);\n              if (!file) {\n                return reject(new Error('not_exists'));\n              }\n              if ((_file3 = file) !== null && _file3 !== void 0 && _file3.error) {\n                if (file.error instanceof Error) {\n                  return reject(file.error);\n                }\n                return reject(new Error(file.error));\n              } // 响应\n\n              return resolve(file);\n            }; // 添加事件\n\n            iframe.onload = fn;\n            iframe.onerror = fn;\n            iframe.onabort = fn; // 禁止 esc 键\n\n            document.body.addEventListener('keydown', onKeydown); // 提交\n\n            form.submit();\n          }, 50);\n        }).then(function (res) {\n          var _iframe$parentNode;\n          iframe === null || iframe === void 0 ? void 0 : (_iframe$parentNode = iframe.parentNode) === null || _iframe$parentNode === void 0 ? void 0 : _iframe$parentNode.removeChild(iframe);\n          return res;\n        }).catch(function (res) {\n          var _iframe$parentNode2;\n          iframe === null || iframe === void 0 ? void 0 : (_iframe$parentNode2 = iframe.parentNode) === null || _iframe$parentNode2 === void 0 ? void 0 : _iframe$parentNode2.removeChild(iframe);\n          return res;\n        });\n      },\n      watchActive: function watchActive(active) {\n        var file;\n        var index = 0;\n        while (file = this.files[index]) {\n          index++;\n          if (!file.fileObject) ;else if (active && !this.destroy) {\n            if (this.uploading >= this.thread || this.uploading && !this.features.html5) {\n              break;\n            }\n            if (!file.active && !file.error && !file.success) {\n              this.update(file, {\n                active: true\n              });\n            }\n          } else {\n            if (file.active) {\n              this.update(file, {\n                active: false\n              });\n            }\n          }\n        }\n        if (this.uploading === 0) {\n          this.active = false;\n        }\n      },\n      watchDrop: function watchDrop(newDrop) {\n        var oldDrop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n        if (!this.features.drop) {\n          return;\n        }\n        if (newDrop === oldDrop) {\n          return;\n        } // 移除挂载\n\n        if (this.dropElement) {\n          try {\n            document.removeEventListener('dragenter', this.onDocumentDragenter, false);\n            document.removeEventListener('dragleave', this.onDocumentDragleave, false);\n            document.removeEventListener('dragover', this.onDocumentDragover, false);\n            document.removeEventListener('drop', this.onDocumentDrop, false);\n            this.dropElement.removeEventListener('dragover', this.onDragover, false);\n            this.dropElement.removeEventListener('drop', this.onDrop, false);\n          } catch (e) {}\n        }\n        var el = null;\n        if (!newDrop) ;else if (typeof newDrop === 'string') {\n          // @ts-ignore\n          el = document.querySelector(newDrop) || this.$root.$el.querySelector(newDrop);\n        } else if (newDrop === true) {\n          var _el;\n\n          // @ts-ignore\n          el = this.$parent.$el;\n          if (!el || ((_el = el) === null || _el === void 0 ? void 0 : _el.nodeType) === 8) {\n            var _el2;\n\n            // @ts-ignore\n            el = this.$root.$el;\n            if (!el || ((_el2 = el) === null || _el2 === void 0 ? void 0 : _el2.nodeType) === 8) {\n              el = document.body;\n            }\n          }\n        } else {\n          el = newDrop;\n        }\n        this.dropElement = el;\n        if (this.dropElement) {\n          document.addEventListener('dragenter', this.onDocumentDragenter, false);\n          document.addEventListener('dragleave', this.onDocumentDragleave, false);\n          document.addEventListener('dragover', this.onDocumentDragover, false);\n          document.addEventListener('drop', this.onDocumentDrop, false);\n          this.dropElement.addEventListener('dragover', this.onDragover, false);\n          this.dropElement.addEventListener('drop', this.onDrop, false);\n        }\n      },\n      watchDropActive: function watchDropActive(newDropActive, oldDropActive) {\n        if (newDropActive === oldDropActive) {\n          return;\n        }\n        if (this.dropTimeout) {\n          clearTimeout(this.dropTimeout);\n          this.dropTimeout = null;\n        }\n        if (newDropActive) {\n          // @ts-ignore\n          this.dropTimeout = setTimeout(this.onDocumentDrop, 1000);\n        }\n      },\n      onDocumentDragenter: function onDocumentDragenter(e) {\n        var _dt$files, _dt$types;\n        if (this.dropActive) {\n          return;\n        }\n        if (!e.dataTransfer) {\n          return;\n        }\n        var dt = e.dataTransfer;\n        if (dt !== null && dt !== void 0 && (_dt$files = dt.files) !== null && _dt$files !== void 0 && _dt$files.length) {\n          this.dropActive = true;\n        } else if (!dt.types) {\n          this.dropActive = true;\n        } else if (dt.types.indexOf && dt.types.indexOf('Files') !== -1) {\n          this.dropActive = true; // @ts-ignore\n        } else if ((_dt$types = dt.types) !== null && _dt$types !== void 0 && _dt$types.contains && dt.types.contains('Files')) {\n          this.dropActive = true;\n        }\n        if (this.dropActive) {\n          this.watchDropActive(true);\n        }\n      },\n      onDocumentDragleave: function onDocumentDragleave(e) {\n        if (!this.dropActive) {\n          return;\n        } // @ts-ignore\n\n        if (e.target === e.explicitOriginalTarget || !e.fromElement && (e.clientX <= 0 || e.clientY <= 0 || e.clientX >= window.innerWidth || e.clientY >= window.innerHeight)) {\n          this.dropActive = false;\n          this.watchDropActive(false);\n        }\n      },\n      onDocumentDragover: function onDocumentDragover() {\n        this.watchDropActive(true);\n      },\n      onDocumentDrop: function onDocumentDrop() {\n        this.dropActive = false;\n        this.watchDropActive(false);\n      },\n      onDragover: function onDragover(e) {\n        e.preventDefault();\n      },\n      onDrop: function onDrop(e) {\n        e.preventDefault();\n        e.dataTransfer && this.addDataTransfer(e.dataTransfer);\n      },\n      inputOnChange: async function inputOnChange(e) {\n        var _this14 = this;\n        if (!(e.target instanceof HTMLInputElement)) {\n          return Promise.reject(new Error(\"not HTMLInputElement\"));\n        }\n        e.target;\n        var reinput = function reinput(res) {\n          _this14.reload = true; // @ts-ignore\n\n          _this14.$nextTick(function () {\n            _this14.reload = false;\n          });\n          return res;\n        };\n        return this.addInputFile(e.target).then(reinput).catch(reinput);\n      }\n    }\n  });\n  var _hoisted_1 = [\"for\"];\n  var _hoisted_2 = [\"name\", \"id\", \"accept\", \"capture\", \"disabled\", \"webkitdirectory\", \"allowdirs\", \"directory\", \"multiple\"];\n  function render(_ctx, _cache, $props, $setup, $data, $options) {\n    return vue.openBlock(), vue.createElementBlock(\"span\", {\n      class: vue.normalizeClass(_ctx.className)\n    }, [vue.renderSlot(_ctx.$slots, \"default\"), vue.createElementVNode(\"label\", {\n      for: _ctx.forId\n    }, null, 8, _hoisted_1), !_ctx.reload ? (vue.openBlock(), vue.createElementBlock(\"input\", {\n      key: 0,\n      ref: \"input\",\n      type: \"file\",\n      name: _ctx.name,\n      id: _ctx.forId,\n      accept: _ctx.accept,\n      capture: _ctx.capture,\n      disabled: _ctx.disabled,\n      webkitdirectory: _ctx.iDirectory,\n      allowdirs: _ctx.iDirectory,\n      directory: _ctx.iDirectory,\n      multiple: _ctx.multiple && _ctx.features.html5,\n      onChange: _cache[0] || (_cache[0] = function () {\n        return _ctx.inputOnChange && _ctx.inputOnChange.apply(_ctx, arguments);\n      })\n    }, null, 40, _hoisted_2)) : vue.createCommentVNode(\"\", true)], 2);\n  }\n  function styleInject(css, ref) {\n    if (ref === void 0) ref = {};\n    var insertAt = ref.insertAt;\n    if (!css || typeof document === 'undefined') {\n      return;\n    }\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    if (insertAt === 'top') {\n      if (head.firstChild) {\n        head.insertBefore(style, head.firstChild);\n      } else {\n        head.appendChild(style);\n      }\n    } else {\n      head.appendChild(style);\n    }\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n  }\n  var css_248z = \"\\n.file-uploads {\\n  overflow: hidden;\\n  position: relative;\\n  text-align: center;\\n  display: inline-block;\\n}\\n.file-uploads.file-uploads-html4 input,\\n.file-uploads.file-uploads-html5 label {\\n  /* background fix ie  click */\\n  background: #fff;\\n  opacity: 0;\\n  font-size: 20em;\\n  z-index: 1;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n}\\n.file-uploads.file-uploads-html5 input,\\n.file-uploads.file-uploads-html4 label {\\n  /* background fix ie  click */\\n  background: rgba(255, 255, 255, 0);\\n  overflow: hidden;\\n  position: fixed;\\n  width: 1px;\\n  height: 1px;\\n  z-index: -1;\\n  opacity: 0;\\n}\\n\";\n  styleInject(css_248z);\n  script.render = render;\n  return script;\n});","map":{"version":3,"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","_ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_typeof","ownKeys","_objectSpread2","_defineProperty","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","createRequest","options","xhr","XMLHttpRequest","open","method","url","responseType","headers","setRequestHeader","sendRequest","body","Promise","resolve","reject","onload","status","response","JSON","parse","err","onerror","send","stringify","sendFormRequest","data","FormData","append","request","ChunkUploadHandler","file","chunks","sessionId","chunkSize","speedInterval","get","parseInt","maxRetries","maxActive","type","size","action","startBody","uploadBody","finishBody","_this","completedProgress","chunksUploaded","uploadingProgress","chunksUploading","reduce","progress","chunk","Math","min","active","uploaded","chunksToUpload","createChunks","start","end","fileSize","blob","startOffset","retries","updateFileProgress","pause","stopChunks","abort","stopSpeedCalc","resume","startChunking","upload","_this2","promise","_this3","assign","phase","mime_type","fileType","fileName","then","res","session_id","end_offset","catch","maxActiveChunks","uploadNextChunk","startSpeedCalc","hasChunksToUpload","uploadChunk","finish","_this4","addEventListener","evt","lengthComputable","round","loaded","total","start_offset","_this5","_this6","speed","lastUploadedBytes","window","setInterval","uploadedBytes","clearInterval","CHUNK_DEFAULT_OPTIONS","minSize","handler","script","vue","defineComponent","inputId","String","default","accept","capture","disabled","multiple","Boolean","maximum","Number","addIndex","directory","createDirectory","postAction","putAction","customAction","Function","_default","timeout","drop","HTMLElement","dropDirectory","extensions","RegExp","modelValue","thread","chunkEnabled","emits","files","features","html5","dropActive","uploading","destroy","maps","dropElement","dropTimeout","reload","mounted","_this7","input","document","createElement","webkitdirectory","ondrop","id","$nextTick","$parent","$forceUpdate","watchDrop","beforeUnmount","watchActive","computed","fileObject","error","success","chunkOptions","className","undefined","forId","iMaximum","iExtensions","exts","split","map","trim","join","replace","iDirectory","watch","_active","watchDropActive","oldMaps","newFile","oldFile","emitFile","_key","methods","newId","random","substr","clear","emitInput","add","_files","index","addFiles","Blob","webkitRelativePath","relativePath","Element","el","HTMLInputElement","emitFilter","newFiles","concat","_newFiles","splice","index2","_i","_file","_i2","addInputFile","_this8","entrys","webkitEntries","entries","getFileSystemEntry","names","__vuex__","addDataTransfer","dataTransfer","_dataTransfer$items","_this9","items","dataTransferTtem","entry","getAsEntry","getAsFile","webkitGetAsEntry","maximumValue","_i3","_this10","path","uploadFiles","v","results","isFile","fileEntry","isDirectory","directoryEntry","_uploadFiles","File","dirReader","createReader","readEntries","id1","id2","file1","file2","index1","indexOf","remove","console","update","isPrevent","$emit","prevent","_newFile","_this11","setTimeout","_newFile2","e","code","message","ceil","Error","search","shouldUseChunkUpload","uploadPut","uploadHtml5","uploadHtml4","HandlerClass","querys","encodeURIComponent","queryString","uploadXhr","form","filename","ufile","_this12","speedTime","speedLoaded","onprogress","speedTime2","Date","now","toFixed","interval","_file2","complete","fn","responseText","contentType","getResponseHeader","onabort","ontimeout","_this13","onKeydown","keyCode","preventDefault","iframe","src","setAttribute","appendChild","getResponseData","_doc","doc","contentWindow","contentDocument","innerHTML","_file3","removeEventListener","submit","_iframe$parentNode","parentNode","removeChild","_iframe$parentNode2","newDrop","oldDrop","onDocumentDragenter","onDocumentDragleave","onDocumentDragover","onDocumentDrop","onDragover","onDrop","querySelector","$root","$el","_el","nodeType","_el2","newDropActive","oldDropActive","clearTimeout","_dt$files","_dt$types","dt","types","contains","explicitOriginalTarget","fromElement","clientX","clientY","innerWidth","innerHeight","inputOnChange","_this14","reinput","_hoisted_1","_hoisted_2","render","_ctx","_cache","$props","$setup","$data","$options","openBlock","createElementBlock","class","normalizeClass","renderSlot","$slots","createElementVNode","for","ref","allowdirs","onChange","createCommentVNode","styleInject","css","insertAt","head","getElementsByTagName","style","firstChild","insertBefore","styleSheet","cssText","createTextNode","css_248z"],"sources":["vue-upload-component.js"],"sourcesContent":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? _ownKeys(Object(source), !0).forEach(function (key) { _defineProperty2(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : _ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty2(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nimport { defineComponent, openBlock, createElementBlock, normalizeClass, renderSlot, createElementVNode, createCommentVNode } from 'vue';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * Creates a XHR request\n *\n * @param {Object} options\n */\n\n\nvar createRequest = function createRequest(options) {\n  var xhr = new XMLHttpRequest();\n  xhr.open(options.method || 'GET', options.url);\n  xhr.responseType = 'json';\n\n  if (options.headers) {\n    Object.keys(options.headers).forEach(function (key) {\n      xhr.setRequestHeader(key, options.headers[key]);\n    });\n  }\n\n  return xhr;\n};\n/**\n * Sends a XHR request with certain body\n *\n * @param {XMLHttpRequest} xhr\n * @param {Object} body\n */\n\n\nvar sendRequest = function sendRequest(xhr, body) {\n  return new Promise(function (resolve, reject) {\n    xhr.onload = function () {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        var response;\n\n        try {\n          response = JSON.parse(xhr.response);\n        } catch (err) {\n          response = xhr.response;\n        }\n\n        resolve(response);\n      } else {\n        reject(xhr.response);\n      }\n    };\n\n    xhr.onerror = function () {\n      return reject(xhr.response);\n    };\n\n    xhr.send(JSON.stringify(body));\n  });\n};\n/**\n * Sends a XHR request with certain form data\n *\n * @param {XMLHttpRequest} xhr\n * @param {Object} data\n */\n\n\nvar sendFormRequest = function sendFormRequest(xhr, data) {\n  var body = new FormData();\n\n  for (var name in data) {\n    body.append(name, data[name]);\n  }\n\n  return new Promise(function (resolve, reject) {\n    xhr.onload = function () {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        var response;\n\n        try {\n          response = JSON.parse(xhr.response);\n        } catch (err) {\n          response = xhr.response;\n        }\n\n        resolve(response);\n      } else {\n        reject(xhr.response);\n      }\n    };\n\n    xhr.onerror = function () {\n      return reject(xhr.response);\n    };\n\n    xhr.send(body);\n  });\n};\n/**\n * Creates and sends XHR request\n *\n * @param {Object} options\n *\n * @returns Promise\n */\n\n\nfunction request(options) {\n  var xhr = createRequest(options);\n  return sendRequest(xhr, options.body);\n}\n\nvar ChunkUploadHandler = /*#__PURE__*/function () {\n  /**\n   * Constructor\n   *\n   * @param {File} file\n   * @param {Object} options\n   */\n  function ChunkUploadHandler(file, options) {\n    _classCallCheck(this, ChunkUploadHandler);\n\n    this.file = file;\n    this.options = options;\n    this.chunks = [];\n    this.sessionId = null;\n    this.chunkSize = null;\n    this.speedInterval = null;\n  }\n  /**\n   * Gets the max retries from options\n   */\n\n\n  _createClass(ChunkUploadHandler, [{\n    key: \"maxRetries\",\n    get: function get() {\n      return parseInt(this.options.maxRetries, 10);\n    }\n    /**\n     * Gets the max number of active chunks being uploaded at once from options\n     */\n\n  }, {\n    key: \"maxActiveChunks\",\n    get: function get() {\n      return parseInt(this.options.maxActive, 10);\n    }\n    /**\n     * Gets the file type\n     */\n\n  }, {\n    key: \"fileType\",\n    get: function get() {\n      return this.file.type;\n    }\n    /**\n     * Gets the file size\n     */\n\n  }, {\n    key: \"fileSize\",\n    get: function get() {\n      return this.file.size;\n    }\n    /**\n     * Gets the file name\n     */\n\n  }, {\n    key: \"fileName\",\n    get: function get() {\n      return this.file.name;\n    }\n    /**\n     * Gets action (url) to upload the file\n     */\n\n  }, {\n    key: \"action\",\n    get: function get() {\n      return this.options.action || null;\n    }\n    /**\n     * Gets the body to be merged when sending the request in start phase\n     */\n\n  }, {\n    key: \"startBody\",\n    get: function get() {\n      return this.options.startBody || {};\n    }\n    /**\n     * Gets the body to be merged when sending the request in upload phase\n     */\n\n  }, {\n    key: \"uploadBody\",\n    get: function get() {\n      return this.options.uploadBody || {};\n    }\n    /**\n     * Gets the body to be merged when sending the request in finish phase\n     */\n\n  }, {\n    key: \"finishBody\",\n    get: function get() {\n      return this.options.finishBody || {};\n    }\n    /**\n     * Gets the headers of the requests from options\n     */\n\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return this.options.headers || {};\n    }\n    /**\n     * Whether it's ready to upload files or not\n     */\n\n  }, {\n    key: \"readyToUpload\",\n    get: function get() {\n      return !!this.chunks;\n    }\n    /**\n     * Gets the progress of the chunk upload\n     * - Gets all the completed chunks\n     * - Gets the progress of all the chunks that are being uploaded\n     */\n\n  }, {\n    key: \"progress\",\n    get: function get() {\n      var _this = this;\n\n      var completedProgress = this.chunksUploaded.length / this.chunks.length * 100;\n      var uploadingProgress = this.chunksUploading.reduce(function (progress, chunk) {\n        return progress + (chunk.progress | 0) / _this.chunks.length;\n      }, 0);\n      return Math.min(completedProgress + uploadingProgress, 100);\n    }\n    /**\n     * Gets all the chunks that are pending to be uploaded\n     */\n\n  }, {\n    key: \"chunksToUpload\",\n    get: function get() {\n      return this.chunks.filter(function (chunk) {\n        return !chunk.active && !chunk.uploaded;\n      });\n    }\n    /**\n     * Whether there are chunks to upload or not\n     */\n\n  }, {\n    key: \"hasChunksToUpload\",\n    get: function get() {\n      return this.chunksToUpload.length > 0;\n    }\n    /**\n     * Gets all the chunks that are uploading\n     */\n\n  }, {\n    key: \"chunksUploading\",\n    get: function get() {\n      return this.chunks.filter(function (chunk) {\n        return !!chunk.xhr && !!chunk.active;\n      });\n    }\n    /**\n     * Gets all the chunks that have finished uploading\n     */\n\n  }, {\n    key: \"chunksUploaded\",\n    get: function get() {\n      return this.chunks.filter(function (chunk) {\n        return !!chunk.uploaded;\n      });\n    }\n    /**\n     * Creates all the chunks in the initial state\n     */\n\n  }, {\n    key: \"createChunks\",\n    value: function createChunks() {\n      this.chunks = [];\n      var start = 0;\n      var end = this.chunkSize;\n\n      while (start < this.fileSize) {\n        this.chunks.push({\n          blob: this.file.file.slice(start, end),\n          startOffset: start,\n          active: false,\n          retries: this.maxRetries\n        });\n        start = end;\n        end = start + this.chunkSize;\n      }\n    }\n    /**\n     * Updates the progress of the file with the handler's progress\n     */\n\n  }, {\n    key: \"updateFileProgress\",\n    value: function updateFileProgress() {\n      this.file.progress = this.progress;\n    }\n    /**\n     * Paues the upload process\n     * - Stops all active requests\n     * - Sets the file not active\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.file.active = false;\n      this.stopChunks();\n    }\n    /**\n     * Stops all the current chunks\n     */\n\n  }, {\n    key: \"stopChunks\",\n    value: function stopChunks() {\n      this.chunksUploading.forEach(function (chunk) {\n        chunk.xhr.abort();\n        chunk.active = false;\n      });\n      this.stopSpeedCalc();\n    }\n    /**\n     * Resumes the file upload\n     * - Sets the file active\n     * - Starts the following chunks\n     */\n\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      this.file.active = true;\n      this.startChunking();\n    }\n    /**\n     * Starts the file upload\n     *\n     * @returns Promise\n     * - resolve  The file was uploaded\n     * - reject   The file upload failed\n     */\n\n  }, {\n    key: \"upload\",\n    value: function upload() {\n      var _this2 = this;\n\n      this.promise = new Promise(function (resolve, reject) {\n        _this2.resolve = resolve;\n        _this2.reject = reject;\n      });\n      this.start();\n      return this.promise;\n    }\n    /**\n     * Start phase\n     * Sends a request to the backend to initialise the chunks\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      request({\n        method: 'POST',\n        headers: _objectSpread2(_objectSpread2({}, this.headers), {}, {\n          'Content-Type': 'application/json'\n        }),\n        url: this.action,\n        body: Object.assign(this.startBody, {\n          phase: 'start',\n          mime_type: this.fileType,\n          size: this.fileSize,\n          name: this.fileName\n        })\n      }).then(function (res) {\n        if (res.status !== 'success') {\n          _this3.file.response = res;\n          return _this3.reject('server');\n        }\n\n        _this3.sessionId = res.data.session_id;\n        _this3.chunkSize = res.data.end_offset;\n\n        _this3.createChunks();\n\n        _this3.startChunking();\n      }).catch(function (res) {\n        _this3.file.response = res;\n\n        _this3.reject('server');\n      });\n    }\n    /**\n     * Starts to upload chunks\n     */\n\n  }, {\n    key: \"startChunking\",\n    value: function startChunking() {\n      for (var i = 0; i < this.maxActiveChunks; i++) {\n        this.uploadNextChunk();\n      }\n\n      this.startSpeedCalc();\n    }\n    /**\n     * Uploads the next chunk\n     * - Won't do anything if the process is paused\n     * - Will start finish phase if there are no more chunks to upload\n     */\n\n  }, {\n    key: \"uploadNextChunk\",\n    value: function uploadNextChunk() {\n      if (this.file.active) {\n        if (this.hasChunksToUpload) {\n          return this.uploadChunk(this.chunksToUpload[0]);\n        }\n\n        if (this.chunksUploading.length === 0) {\n          return this.finish();\n        }\n      }\n    }\n    /**\n     * Uploads a chunk\n     * - Sends the chunk to the backend\n     * - Sets the chunk as uploaded if everything went well\n     * - Decreases the number of retries if anything went wrong\n     * - Fails if there are no more retries\n     *\n     * @param {Object} chunk\n     */\n\n  }, {\n    key: \"uploadChunk\",\n    value: function uploadChunk(chunk) {\n      var _this4 = this;\n\n      chunk.progress = 0;\n      chunk.active = true;\n      this.updateFileProgress();\n      chunk.xhr = createRequest({\n        method: 'POST',\n        headers: this.headers,\n        url: this.action\n      });\n      chunk.xhr.upload.addEventListener('progress', function (evt) {\n        if (evt.lengthComputable) {\n          chunk.progress = Math.round(evt.loaded / evt.total * 100);\n        }\n      }, false);\n      sendFormRequest(chunk.xhr, Object.assign(this.uploadBody, {\n        phase: 'upload',\n        session_id: this.sessionId,\n        start_offset: chunk.startOffset,\n        chunk: chunk.blob\n      })).then(function (res) {\n        chunk.active = false;\n\n        if (res.status === 'success') {\n          chunk.uploaded = true;\n        } else {\n          if (chunk.retries-- <= 0) {\n            _this4.stopChunks();\n\n            return _this4.reject('upload');\n          }\n        }\n\n        _this4.uploadNextChunk();\n      }).catch(function () {\n        chunk.active = false;\n\n        if (chunk.retries-- <= 0) {\n          _this4.stopChunks();\n\n          return _this4.reject('upload');\n        }\n\n        _this4.uploadNextChunk();\n      });\n    }\n    /**\n     * Finish phase\n     * Sends a request to the backend to finish the process\n     */\n\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      var _this5 = this;\n\n      this.updateFileProgress();\n      this.stopSpeedCalc();\n      request({\n        method: 'POST',\n        headers: _objectSpread2(_objectSpread2({}, this.headers), {}, {\n          'Content-Type': 'application/json'\n        }),\n        url: this.action,\n        body: Object.assign(this.finishBody, {\n          phase: 'finish',\n          session_id: this.sessionId\n        })\n      }).then(function (res) {\n        _this5.file.response = res;\n\n        if (res.status !== 'success') {\n          return _this5.reject('server');\n        }\n\n        _this5.resolve(res);\n      }).catch(function (res) {\n        _this5.file.response = res;\n\n        _this5.reject('server');\n      });\n    }\n    /**\n     * Sets an interval to calculate and\n     * set upload speed every 3 seconds\n     */\n\n  }, {\n    key: \"startSpeedCalc\",\n    value: function startSpeedCalc() {\n      var _this6 = this;\n\n      this.file.speed = 0;\n      var lastUploadedBytes = 0;\n\n      if (!this.speedInterval) {\n        this.speedInterval = window.setInterval(function () {\n          var uploadedBytes = _this6.progress / 100 * _this6.fileSize;\n          _this6.file.speed = uploadedBytes - lastUploadedBytes;\n          lastUploadedBytes = uploadedBytes;\n        }, 1000);\n      }\n    }\n    /**\n     * Removes the upload speed interval\n     */\n\n  }, {\n    key: \"stopSpeedCalc\",\n    value: function stopSpeedCalc() {\n      this.speedInterval && window.clearInterval(this.speedInterval);\n      this.speedInterval = null;\n      this.file.speed = 0;\n    }\n  }]);\n\n  return ChunkUploadHandler;\n}();\n\nvar CHUNK_DEFAULT_OPTIONS = {\n  headers: {},\n  action: '',\n  minSize: 1048576,\n  maxActive: 3,\n  maxRetries: 5,\n  handler: ChunkUploadHandler\n};\nvar script = defineComponent({\n  props: {\n    inputId: {\n      type: String\n    },\n    name: {\n      type: String,\n      default: 'file'\n    },\n    accept: {\n      type: String\n    },\n    capture: {},\n    disabled: {\n      default: false\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    maximum: {\n      type: Number\n    },\n    addIndex: {\n      type: [Boolean, Number]\n    },\n    directory: {\n      type: Boolean\n    },\n    createDirectory: {\n      type: Boolean,\n      default: false\n    },\n    postAction: {\n      type: String\n    },\n    putAction: {\n      type: String\n    },\n    customAction: {\n      type: Function\n    },\n    headers: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    data: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    timeout: {\n      type: Number,\n      default: 0\n    },\n    drop: {\n      type: [Boolean, String, HTMLElement],\n      default: function _default() {\n        return false;\n      }\n    },\n    dropDirectory: {\n      type: Boolean,\n      default: true\n    },\n    size: {\n      type: Number,\n      default: 0\n    },\n    extensions: {\n      type: [RegExp, String, Array],\n      default: function _default() {\n        return [];\n      }\n    },\n    modelValue: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    thread: {\n      type: Number,\n      default: 1\n    },\n    // Chunk upload enabled\n    chunkEnabled: {\n      type: Boolean,\n      default: false\n    },\n    // Chunk upload properties\n    chunk: {\n      type: Object,\n      default: function _default() {\n        return CHUNK_DEFAULT_OPTIONS;\n      }\n    }\n  },\n  emits: ['update:modelValue', 'input-filter', 'input-file'],\n  data: function data() {\n    return {\n      files: this.modelValue,\n      features: {\n        html5: true,\n        directory: false,\n        drop: false\n      },\n      active: false,\n      dropActive: false,\n      uploading: 0,\n      destroy: false,\n      maps: {},\n      dropElement: null,\n      dropTimeout: null,\n      reload: false\n    };\n  },\n\n  /**\r\n   * mounted\r\n   * @return {[type]} [description]\r\n   */\n  mounted: function mounted() {\n    var _this7 = this;\n\n    var input = document.createElement('input');\n    input.type = 'file';\n    input.multiple = true; // html5 特征\n\n    if (window.FormData && input.files) {\n      // 上传目录特征\n      // @ts-ignore\n      if (typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean') {\n        this.features.directory = true;\n      } // 拖拽特征\n\n\n      if (this.features.html5 && typeof input.ondrop !== 'undefined') {\n        this.features.drop = true;\n      }\n    } else {\n      this.features.html5 = false;\n    } // files 定位缓存\n\n\n    this.maps = {};\n\n    if (this.files) {\n      for (var i = 0; i < this.files.length; i++) {\n        var file = this.files[i];\n        this.maps[file.id] = file;\n      }\n    } // @ts-ignore\n\n\n    this.$nextTick(function () {\n      // 更新下父级\n      if (_this7.$parent) {\n        _this7.$parent.$forceUpdate(); // 拖拽渲染\n\n\n        _this7.$parent.$nextTick(function () {\n          _this7.watchDrop(_this7.drop);\n        });\n      } else {\n        // 拖拽渲染\n        _this7.watchDrop(_this7.drop);\n      }\n    });\n  },\n\n  /**\r\n   * beforeUnmount\r\n   * @return {[type]} [description]\r\n   */\n  beforeUnmount: function beforeUnmount() {\n    // 已销毁\n    this.destroy = true; // 设置成不激活\n\n    this.active = false; // 销毁拖拽事件\n\n    this.watchDrop(false); // 销毁不激活\n\n    this.watchActive(false);\n  },\n  computed: {\n    /**\r\n     * uploading 正在上传的线程\r\n     * @return {[type]} [description]\r\n     */\n\n    /**\r\n     * uploaded 文件列表是否全部已上传\r\n     * @return {[type]} [description]\r\n     */\n    uploaded: function uploaded() {\n      var file;\n\n      for (var i = 0; i < this.files.length; i++) {\n        file = this.files[i];\n\n        if (file.fileObject && !file.error && !file.success) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    chunkOptions: function chunkOptions() {\n      return Object.assign(CHUNK_DEFAULT_OPTIONS, this.chunk);\n    },\n    className: function className() {\n      return ['file-uploads', this.features.html5 ? 'file-uploads-html5' : 'file-uploads-html4', this.features.directory && this.directory ? 'file-uploads-directory' : undefined, this.features.drop && this.drop ? 'file-uploads-drop' : undefined, this.disabled ? 'file-uploads-disabled' : undefined];\n    },\n    forId: function forId() {\n      return this.inputId || this.name;\n    },\n    iMaximum: function iMaximum() {\n      if (this.maximum === undefined) {\n        return this.multiple ? 0 : 1;\n      }\n\n      return this.maximum;\n    },\n    iExtensions: function iExtensions() {\n      if (!this.extensions) {\n        return;\n      }\n\n      if (this.extensions instanceof RegExp) {\n        return this.extensions;\n      }\n\n      if (!this.extensions.length) {\n        return;\n      }\n\n      var exts = [];\n\n      if (typeof this.extensions === 'string') {\n        exts = this.extensions.split(',');\n      } else {\n        exts = this.extensions;\n      }\n\n      exts = exts.map(function (value) {\n        return value.trim();\n      }).filter(function (value) {\n        return value;\n      });\n      return new RegExp('\\\\.(' + exts.join('|').replace(/\\./g, '\\\\.') + ')$', 'i');\n    },\n    iDirectory: function iDirectory() {\n      if (this.directory && this.features.directory) {\n        return true;\n      }\n\n      return undefined;\n    }\n  },\n  watch: {\n    active: function active(_active) {\n      this.watchActive(_active);\n    },\n    dropActive: function dropActive(value) {\n      this.watchDropActive(value);\n\n      if (this.$parent) {\n        this.$parent.$forceUpdate();\n      }\n    },\n    drop: function drop(value) {\n      this.watchDrop(value);\n    },\n    modelValue: function modelValue(files) {\n      if (this.files === files) {\n        return;\n      }\n\n      this.files = files;\n      var oldMaps = this.maps; // 重写 maps 缓存\n\n      this.maps = {};\n\n      for (var i = 0; i < this.files.length; i++) {\n        var file = this.files[i];\n        this.maps[file.id] = file;\n      } // add, update\n\n\n      for (var key in this.maps) {\n        var newFile = this.maps[key];\n        var oldFile = oldMaps[key];\n\n        if (newFile !== oldFile) {\n          this.emitFile(newFile, oldFile);\n        }\n      } // delete\n\n\n      for (var _key in oldMaps) {\n        if (!this.maps[_key]) {\n          this.emitFile(undefined, oldMaps[_key]);\n        }\n      }\n    }\n  },\n  methods: {\n    newId: function newId() {\n      return Math.random().toString(36).substr(2);\n    },\n    // 清空\n    clear: function clear() {\n      if (this.files.length) {\n        var files = this.files;\n        this.files = []; // 定位\n\n        this.maps = {}; // 事件\n\n        this.emitInput();\n\n        for (var i = 0; i < files.length; i++) {\n          this.emitFile(undefined, files[i]);\n        }\n      }\n\n      return true;\n    },\n    // 选择\n    get: function get(id) {\n      if (!id) {\n        return false;\n      }\n\n      if (_typeof(id) === 'object') {\n        return this.maps[id.id || ''] || false;\n      }\n\n      return this.maps[id] || false;\n    },\n    // 添加\n    add: function add(_files, index) {\n      // 不是数组整理成数组\n      var files;\n\n      if (_files instanceof Array) {\n        files = _files;\n      } else {\n        files = [_files];\n      }\n\n      if (index === undefined) {\n        // eslint-disable-next-line\n        index = this.addIndex;\n      } // 遍历规范对象\n\n\n      var addFiles = [];\n\n      for (var i = 0; i < files.length; i++) {\n        var file = files[i];\n\n        if (this.features.html5 && file instanceof Blob) {\n          file = {\n            id: '',\n            file: file,\n            size: file.size,\n            // @ts-ignore\n            name: file.webkitRelativePath || file.relativePath || file.name || 'unknown',\n            type: file.type\n          };\n        }\n\n        file = file;\n        var fileObject = false;\n        if (file.fileObject === false) ;else if (file.fileObject) {\n          fileObject = true;\n        } else if (typeof Element !== 'undefined' && file.el instanceof HTMLInputElement) {\n          fileObject = true;\n        } else if (typeof Blob !== 'undefined' && file.file instanceof Blob) {\n          fileObject = true;\n        }\n\n        if (fileObject) {\n          file = _objectSpread(_objectSpread({\n            fileObject: true,\n            size: -1,\n            name: 'Filename',\n            type: '',\n            active: false,\n            error: '',\n            success: false,\n            putAction: this.putAction,\n            postAction: this.postAction,\n            timeout: this.timeout\n          }, file), {}, {\n            response: {},\n            progress: '0.00',\n            speed: 0 // 只读\n            // file: undefined,\n            // xhr: undefined,\n            // el: undefined,\n            // iframe: undefined,\n\n          });\n          file.data = _objectSpread(_objectSpread({}, this.data), file.data ? file.data : {});\n          file.headers = _objectSpread(_objectSpread({}, this.headers), file.headers ? file.headers : {});\n        } // 必须包含 id\n\n\n        if (!file.id) {\n          file.id = this.newId();\n        }\n\n        if (this.emitFilter(file, undefined)) {\n          continue;\n        } // 最大数量限制\n\n\n        if (this.iMaximum > 1 && addFiles.length + this.files.length >= this.iMaximum) {\n          break;\n        }\n\n        addFiles.push(file); // 最大数量限制\n\n        if (this.iMaximum === 1) {\n          break;\n        }\n      } // 没有文件\n\n\n      if (!addFiles.length) {\n        return;\n      } // 如果是 1 清空\n\n\n      if (this.iMaximum === 1) {\n        this.clear();\n      } // 添加进去 files\n\n\n      var newFiles;\n\n      if (index === true || index === 0) {\n        newFiles = addFiles.concat(this.files);\n      } else if (index) {\n        var _newFiles;\n\n        newFiles = this.files.concat([]);\n\n        (_newFiles = newFiles).splice.apply(_newFiles, [index, 0].concat(_toConsumableArray(addFiles)));\n      } else {\n        newFiles = this.files.concat(addFiles);\n      }\n\n      this.files = newFiles; // 读取代理后的数据\n\n      var index2 = 0;\n\n      if (index === true || index === 0) {\n        index2 = 0;\n      } else if (index) {\n        if (index >= 0) {\n          if (index + addFiles.length > this.files.length) {\n            index2 = this.files.length - addFiles.length;\n          } else {\n            index2 = index;\n          }\n        } else {\n          index2 = this.files.length - addFiles.length + index;\n\n          if (index2 < 0) {\n            index2 = 0;\n          }\n        }\n      } else {\n        index2 = this.files.length - addFiles.length;\n      }\n\n      addFiles = this.files.slice(index2, index2 + addFiles.length); // 定位\n\n      for (var _i = 0; _i < addFiles.length; _i++) {\n        var _file = addFiles[_i];\n        this.maps[_file.id] = _file;\n      } // 事件\n\n\n      this.emitInput();\n\n      for (var _i2 = 0; _i2 < addFiles.length; _i2++) {\n        this.emitFile(addFiles[_i2], undefined);\n      }\n\n      return _files instanceof Array ? addFiles : addFiles[0];\n    },\n    // 添加表单文件\n    addInputFile: function addInputFile(el) {\n      var _this8 = this;\n\n      var files = [];\n      this.iMaximum; // @ts-ignore\n\n      var entrys = el.webkitEntries || el.entries || undefined;\n\n      if (entrys !== null && entrys !== void 0 && entrys.length) {\n        return this.getFileSystemEntry(entrys).then(function (files) {\n          return _this8.add(files);\n        });\n      }\n\n      if (el.files) {\n        for (var i = 0; i < el.files.length; i++) {\n          var file = el.files[i];\n          files.push({\n            id: '',\n            size: file.size,\n            // @ts-ignore\n            name: file.webkitRelativePath || file.relativePath || file.name,\n            type: file.type,\n            file: file\n          });\n        }\n      } else {\n        var names = el.value.replace(/\\\\/g, '/').split('/');\n\n        if (!names || !names.length) {\n          names = [el.value];\n        } // @ts-ignore\n\n\n        delete el.__vuex__;\n        files.push({\n          id: '',\n          name: names[names.length - 1],\n          el: el\n        });\n      }\n\n      return Promise.resolve(this.add(files));\n    },\n    // 添加 DataTransfer\n    addDataTransfer: function addDataTransfer(dataTransfer) {\n      var _dataTransfer$items,\n          _this9 = this;\n\n      // dataTransfer.items 支持\n      if (dataTransfer !== null && dataTransfer !== void 0 && (_dataTransfer$items = dataTransfer.items) !== null && _dataTransfer$items !== void 0 && _dataTransfer$items.length) {\n        var entrys = []; // 遍历出所有 dataTransferVueUploadItem\n\n        for (var i = 0; i < dataTransfer.items.length; i++) {\n          var dataTransferTtem = dataTransfer.items[i];\n          var entry = void 0; // @ts-ignore\n\n          if (dataTransferTtem.getAsEntry) {\n            // @ts-ignore\n            entry = dataTransferTtem.getAsEntry() || dataTransferTtem.getAsFile();\n          } else if (dataTransferTtem.webkitGetAsEntry) {\n            entry = dataTransferTtem.webkitGetAsEntry() || dataTransferTtem.getAsFile();\n          } else {\n            entry = dataTransferTtem.getAsFile();\n          }\n\n          if (entry) {\n            entrys.push(entry);\n          }\n        }\n\n        return this.getFileSystemEntry(entrys).then(function (files) {\n          return _this9.add(files);\n        });\n      } // dataTransfer.files 支持\n\n\n      var maximumValue = this.iMaximum;\n      var files = [];\n\n      if (dataTransfer.files.length) {\n        for (var _i3 = 0; _i3 < dataTransfer.files.length; _i3++) {\n          files.push(dataTransfer.files[_i3]);\n\n          if (maximumValue > 0 && files.length >= maximumValue) {\n            break;\n          }\n        }\n\n        return Promise.resolve(this.add(files));\n      }\n\n      return Promise.resolve([]);\n    },\n    // 获得 entrys    \n    getFileSystemEntry: function getFileSystemEntry(entry) {\n      var _this10 = this;\n\n      var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      // getFileSystemEntry(entry: any, path = ''): Promise<VueUploadItem[]> {\n      return new Promise(function (resolve) {\n        var maximumValue = _this10.iMaximum;\n\n        if (!entry) {\n          resolve([]);\n          return;\n        }\n\n        if (entry instanceof Array) {\n          // 多个\n          var uploadFiles = [];\n\n          var forEach = function forEach(i) {\n            var v = entry[i];\n\n            if (!v || maximumValue > 0 && uploadFiles.length >= maximumValue) {\n              return resolve(uploadFiles);\n            }\n\n            _this10.getFileSystemEntry(v, path).then(function (results) {\n              uploadFiles.push.apply(uploadFiles, _toConsumableArray(results));\n              forEach(i + 1);\n            });\n          };\n\n          forEach(0);\n          return;\n        }\n\n        if (entry instanceof Blob) {\n          resolve([{\n            id: '',\n            size: entry.size,\n            // @ts-ignore\n            name: path + entry.name,\n            type: entry.type,\n            file: entry\n          }]);\n          return;\n        }\n\n        if (entry.isFile) {\n          var fileEntry = entry;\n          fileEntry.file(function (file) {\n            resolve([{\n              id: '',\n              size: file.size,\n              name: path + file.name,\n              type: file.type,\n              file: file\n            }]);\n          });\n          return;\n        }\n\n        if (entry.isDirectory && _this10.dropDirectory) {\n          var directoryEntry = entry;\n          var _uploadFiles = []; // 目录也要添加到文件列表\n\n          if (_this10.createDirectory) {\n            _uploadFiles.push({\n              id: '',\n              name: path + directoryEntry.name,\n              size: 0,\n              type: 'text/directory',\n              file: new File([], path + directoryEntry.name, {\n                type: 'text/directory'\n              })\n            });\n          }\n\n          var dirReader = directoryEntry.createReader();\n\n          var readEntries = function readEntries() {\n            dirReader.readEntries(function (entries) {\n              var forEach = function forEach(i) {\n                if (!entries[i] && i === 0 || maximumValue > 0 && _uploadFiles.length >= maximumValue) {\n                  return resolve(_uploadFiles);\n                }\n\n                if (!entries[i]) {\n                  return readEntries();\n                }\n\n                _this10.getFileSystemEntry(entries[i], path + directoryEntry.name + '/').then(function (results) {\n                  _uploadFiles.push.apply(_uploadFiles, _toConsumableArray(results));\n\n                  forEach(i + 1);\n                });\n              };\n\n              forEach(0);\n            });\n          };\n\n          readEntries();\n          return;\n        }\n\n        resolve([]);\n      });\n    },\n    // 替换\n    replace: function replace(id1, id2) {\n      var file1 = this.get(id1);\n      var file2 = this.get(id2);\n\n      if (!file1 || !file2 || file1 === file2) {\n        return false;\n      }\n\n      var files = this.files.concat([]);\n      var index1 = files.indexOf(file1);\n      var index2 = files.indexOf(file2);\n\n      if (index1 === -1 || index2 === -1) {\n        return false;\n      }\n\n      files[index1] = file2;\n      files[index2] = file1;\n      this.files = files;\n      this.emitInput();\n      return true;\n    },\n    // 移除\n    remove: function remove(id) {\n      var file = this.get(id);\n\n      if (file) {\n        if (this.emitFilter(undefined, file)) {\n          return false;\n        }\n\n        var files = this.files.concat([]);\n        var index = files.indexOf(file);\n\n        if (index === -1) {\n          console.error('remove', file);\n          return false;\n        }\n\n        files.splice(index, 1);\n        this.files = files; // 定位\n\n        delete this.maps[file.id]; // 事件\n\n        this.emitInput();\n        this.emitFile(undefined, file);\n      }\n\n      return file;\n    },\n    // 更新\n    update: function update(id, data) {\n      var file = this.get(id);\n\n      if (file) {\n        var newFile = _objectSpread(_objectSpread({}, file), data); // 停用必须加上错误\n\n\n        if (file.fileObject && file.active && !newFile.active && !newFile.error && !newFile.success) {\n          newFile.error = 'abort';\n        }\n\n        if (this.emitFilter(newFile, file)) {\n          return false;\n        }\n\n        var files = this.files.concat([]);\n        var index = files.indexOf(file);\n\n        if (index === -1) {\n          console.error('update', file);\n          return false;\n        }\n\n        files.splice(index, 1, newFile);\n        this.files = files;\n        newFile = this.files[index]; // 删除  旧定位 写入 新定位 （已便支持修改id)\n\n        delete this.maps[file.id];\n        this.maps[newFile.id] = newFile; // 事件\n\n        this.emitInput();\n        this.emitFile(newFile, file);\n        return newFile;\n      }\n\n      return false;\n    },\n    // 预处理 事件 过滤器\n    emitFilter: function emitFilter(newFile, oldFile) {\n      var isPrevent = false;\n      this.$emit('input-filter', newFile, oldFile, function () {\n        var prevent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        isPrevent = prevent;\n        return isPrevent;\n      });\n      return isPrevent;\n    },\n    // 处理后 事件 分发\n    emitFile: function emitFile(newFile, oldFile) {\n      var _newFile,\n          _this11 = this;\n\n      this.$emit('input-file', newFile, oldFile);\n\n      if ((_newFile = newFile) !== null && _newFile !== void 0 && _newFile.fileObject && newFile.active && (!oldFile || !oldFile.active)) {\n        this.uploading++; // 激活\n        // @ts-ignore\n\n        this.$nextTick(function () {\n          setTimeout(function () {\n            newFile && _this11.upload(newFile).then(function () {\n              var _newFile2;\n\n              if (newFile) {\n                // eslint-disable-next-line\n                newFile = _this11.get(newFile) || undefined;\n              }\n\n              if ((_newFile2 = newFile) !== null && _newFile2 !== void 0 && _newFile2.fileObject) {\n                _this11.update(newFile, {\n                  active: false,\n                  success: !newFile.error\n                });\n              }\n            }).catch(function (e) {\n              newFile && _this11.update(newFile, {\n                active: false,\n                success: false,\n                error: e.code || e.error || e.message || e\n              });\n            });\n          }, Math.ceil(Math.random() * 50 + 50));\n        });\n      } else if ((!newFile || !newFile.fileObject || !newFile.active) && oldFile && oldFile.fileObject && oldFile.active) {\n        // 停止\n        this.uploading--;\n      } // 自动延续激活\n      // @ts-ignore\n\n\n      if (this.active && (Boolean(newFile) !== Boolean(oldFile) || newFile.active !== oldFile.active)) {\n        this.watchActive(true);\n      }\n    },\n    emitInput: function emitInput() {\n      this.$emit('update:modelValue', this.files);\n    },\n    // 上传\n    upload: function upload(id) {\n      var file = this.get(id); // 被删除\n\n      if (!file) {\n        return Promise.reject(new Error('not_exists'));\n      } // 不是文件对象\n\n\n      if (!file.fileObject) {\n        return Promise.reject(new Error('file_object'));\n      } // 有错误直接响应\n\n\n      if (file.error) {\n        if (file.error instanceof Error) {\n          return Promise.reject(file.error);\n        }\n\n        return Promise.reject(new Error(file.error));\n      } // 已完成直接响应\n\n\n      if (file.success) {\n        return Promise.resolve(file);\n      } // 后缀\n\n\n      if (file.name && this.iExtensions && file.type !== \"text/directory\") {\n        if (file.name.search(this.iExtensions) === -1) {\n          return Promise.reject(new Error('extension'));\n        }\n      } // 大小\n\n\n      if (this.size > 0 && file.size !== undefined && file.size >= 0 && file.size > this.size && file.type !== \"text/directory\") {\n        return Promise.reject(new Error('size'));\n      }\n\n      if (this.customAction) {\n        return this.customAction(file, this);\n      }\n\n      if (this.features.html5) {\n        if (this.shouldUseChunkUpload(file)) {\n          return this.uploadChunk(file);\n        }\n\n        if (file.putAction) {\n          return this.uploadPut(file);\n        }\n\n        if (file.postAction) {\n          return this.uploadHtml5(file);\n        }\n      }\n\n      if (file.postAction) {\n        return this.uploadHtml4(file);\n      }\n\n      return Promise.reject(new Error('No action configured'));\n    },\n\n    /**\r\n     * Whether this file should be uploaded using chunk upload or not\r\n     *\r\n     * @param Object file\r\n     */\n    shouldUseChunkUpload: function shouldUseChunkUpload(file) {\n      return this.chunkEnabled && !!this.chunkOptions.handler && file.size && file.size > this.chunkOptions.minSize;\n    },\n\n    /**\r\n     * Upload a file using Chunk method\r\n     *\r\n     * @param File file\r\n     */\n    uploadChunk: function uploadChunk(file) {\n      var HandlerClass = this.chunkOptions.handler;\n      file.chunk = new HandlerClass(file, this.chunkOptions);\n      return file.chunk.upload().then(function (res) {\n        return file;\n      });\n    },\n    uploadPut: function uploadPut(file) {\n      var querys = [];\n      var value;\n\n      for (var key in file.data) {\n        value = file.data[key];\n\n        if (value !== null && value !== undefined) {\n          querys.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n        }\n      }\n\n      var putAction = file.putAction || '';\n      var queryString = querys.length ? (putAction.indexOf('?') === -1 ? '?' : '&') + querys.join('&') : '';\n      var xhr = new XMLHttpRequest();\n      xhr.open('PUT', putAction + queryString);\n      return this.uploadXhr(xhr, file, file.file);\n    },\n    uploadHtml5: function uploadHtml5(file) {\n      var form = new window.FormData();\n      var value;\n\n      for (var key in file.data) {\n        value = file.data[key];\n\n        if (value && _typeof(value) === 'object' && typeof value.toString !== 'function') {\n          if (value instanceof File) {\n            form.append(key, value, value.name);\n          } else {\n            form.append(key, JSON.stringify(value));\n          }\n        } else if (value !== null && value !== undefined) {\n          form.append(key, value);\n        }\n      } // Moved file.name as the first option to set the filename of the uploaded file, since file.name\n      // contains the full (relative) path of the file not just the filename as in file.file.filename\n      // @ts-ignore\n\n\n      form.append(this.name, file.file, file.name || file.file.name || file.file.filename);\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', file.postAction || '');\n      return this.uploadXhr(xhr, file, form);\n    },\n    uploadXhr: function uploadXhr(xhr, ufile, body) {\n      var _this12 = this;\n\n      var file = ufile;\n      var speedTime = 0;\n      var speedLoaded = 0; // 进度条\n\n      xhr.upload.onprogress = function (e) {\n        // 还未开始上传 已删除 未激活\n        if (!file) {\n          return;\n        }\n\n        file = _this12.get(file);\n\n        if (!e.lengthComputable || !file || !file.fileObject || !file.active) {\n          return;\n        } // 进度 速度 每秒更新一次\n\n\n        var speedTime2 = Math.round(Date.now() / 1000);\n\n        if (speedTime2 === speedTime) {\n          return;\n        }\n\n        speedTime = speedTime2;\n        file = _this12.update(file, {\n          progress: (e.loaded / e.total * 100).toFixed(2),\n          speed: e.loaded - speedLoaded\n        });\n        speedLoaded = e.loaded;\n      }; // 检查激活状态\n\n\n      var interval = window.setInterval(function () {\n        if (file) {\n          if (file = _this12.get(file)) {\n            var _file2;\n\n            if ((_file2 = file) !== null && _file2 !== void 0 && _file2.fileObject && !file.success && !file.error && file.active) {\n              return;\n            }\n          }\n        }\n\n        if (interval) {\n          clearInterval(interval);\n          interval = undefined;\n        }\n\n        try {\n          xhr.abort();\n          xhr.timeout = 1;\n        } catch (e) {}\n      }, 100);\n      return new Promise(function (resolve, reject) {\n        if (!file) {\n          reject(new Error('not_exists'));\n          return;\n        }\n\n        var complete;\n\n        var fn = function fn(e) {\n          // 已经处理过了\n          if (complete) {\n            return;\n          }\n\n          complete = true;\n\n          if (interval) {\n            clearInterval(interval);\n            interval = undefined;\n          }\n\n          if (!file) {\n            return reject(new Error('not_exists'));\n          }\n\n          file = _this12.get(file); // 不存在直接响应\n\n          if (!file) {\n            return reject(new Error('not_exists'));\n          } // 不是文件对象\n\n\n          if (!file.fileObject) {\n            return reject(new Error('file_object'));\n          } // 有错误自动响应\n\n\n          if (file.error) {\n            if (file.error instanceof Error) {\n              return reject(file.error);\n            }\n\n            return reject(new Error(file.error));\n          } // 未激活\n\n\n          if (!file.active) {\n            return reject(new Error('abort'));\n          } // 已完成 直接相应\n\n\n          if (file.success) {\n            return resolve(file);\n          }\n\n          var data = {};\n\n          switch (e.type) {\n            case 'timeout':\n            case 'abort':\n              data.error = e.type;\n              break;\n\n            case 'error':\n              if (!xhr.status) {\n                data.error = 'network';\n              } else if (xhr.status >= 500) {\n                data.error = 'server';\n              } else if (xhr.status >= 400) {\n                data.error = 'denied';\n              }\n\n              break;\n\n            default:\n              if (xhr.status >= 500) {\n                data.error = 'server';\n              } else if (xhr.status >= 400) {\n                data.error = 'denied';\n              } else {\n                data.progress = '100.00';\n              }\n\n          }\n\n          if (xhr.responseText) {\n            var contentType = xhr.getResponseHeader('Content-Type');\n\n            if (contentType && contentType.indexOf('/json') !== -1) {\n              data.response = JSON.parse(xhr.responseText);\n            } else {\n              data.response = xhr.responseText;\n            }\n          } // 更新\n          // @ts-ignore\n\n\n          file = _this12.update(file, data);\n\n          if (!file) {\n            return reject(new Error('abort'));\n          } // 有错误自动响应\n\n\n          if (file.error) {\n            if (file.error instanceof Error) {\n              return reject(file.error);\n            }\n\n            return reject(new Error(file.error));\n          } // 响应\n\n\n          return resolve(file);\n        }; // 事件\n\n\n        xhr.onload = fn;\n        xhr.onerror = fn;\n        xhr.onabort = fn;\n        xhr.ontimeout = fn; // 超时\n\n        if (file.timeout) {\n          xhr.timeout = file.timeout;\n        } // headers\n\n\n        for (var key in file.headers) {\n          xhr.setRequestHeader(key, file.headers[key]);\n        } // 更新 xhr\n        // @ts-ignore\n\n\n        file = _this12.update(file, {\n          xhr: xhr\n        }); // 开始上传\n\n        file && xhr.send(body);\n      });\n    },\n    uploadHtml4: function uploadHtml4(ufile) {\n      var _this13 = this;\n\n      var file = ufile;\n\n      if (!file) {\n        return Promise.reject(new Error('not_exists'));\n      }\n\n      var onKeydown = function onKeydown(e) {\n        if (e.keyCode === 27) {\n          e.preventDefault();\n        }\n      };\n\n      var iframe = document.createElement('iframe');\n      iframe.id = 'upload-iframe-' + file.id;\n      iframe.name = 'upload-iframe-' + file.id;\n      iframe.src = 'about:blank';\n      iframe.setAttribute('style', 'width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;');\n      var form = document.createElement('form');\n      form.setAttribute('action', file.postAction || '');\n      form.name = 'upload-form-' + file.id;\n      form.setAttribute('method', 'POST');\n      form.setAttribute('target', 'upload-iframe-' + file.id);\n      form.setAttribute('enctype', 'multipart/form-data');\n\n      for (var key in file.data) {\n        var value = file.data[key];\n\n        if (value && _typeof(value) === 'object' && typeof value.toString !== 'function') {\n          value = JSON.stringify(value);\n        }\n\n        if (value !== null && value !== undefined) {\n          var el = document.createElement('input');\n          el.type = 'hidden';\n          el.name = key;\n          el.value = value;\n          form.appendChild(el);\n        }\n      }\n\n      form.appendChild(file.el);\n      document.body.appendChild(iframe).appendChild(form);\n\n      var getResponseData = function getResponseData() {\n        var _doc;\n\n        var doc;\n\n        try {\n          if (iframe.contentWindow) {\n            doc = iframe.contentWindow.document;\n          }\n        } catch (err) {}\n\n        if (!doc) {\n          try {\n            // @ts-ignore\n            doc = iframe.contentDocument ? iframe.contentDocument : iframe.document;\n          } catch (err) {\n            // @ts-ignore\n            doc = iframe.document;\n          }\n        } // @ts-ignore\n\n\n        if ((_doc = doc) !== null && _doc !== void 0 && _doc.body) {\n          return doc.body.innerHTML;\n        }\n\n        return null;\n      };\n\n      return new Promise(function (resolve, reject) {\n        setTimeout(function () {\n          if (!file) {\n            reject(new Error('not_exists'));\n            return;\n          }\n\n          file = _this13.update(file, {\n            iframe: iframe\n          }); // 不存在\n\n          if (!file) {\n            return reject(new Error('not_exists'));\n          } // 定时检查\n\n\n          var interval = window.setInterval(function () {\n            if (file) {\n              if (file = _this13.get(file)) {\n                if (file.fileObject && !file.success && !file.error && file.active) {\n                  return;\n                }\n              }\n            }\n\n            if (interval) {\n              clearInterval(interval);\n              interval = undefined;\n            } // @ts-ignore\n\n\n            iframe.onabort({\n              type: file ? 'abort' : 'not_exists'\n            });\n          }, 100);\n          var complete;\n\n          var fn = function fn(e) {\n            var _file3;\n\n            // 已经处理过了\n            if (complete) {\n              return;\n            }\n\n            complete = true;\n\n            if (interval) {\n              clearInterval(interval);\n              interval = undefined;\n            } // 关闭 esc 事件\n\n\n            document.body.removeEventListener('keydown', onKeydown);\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            }\n\n            file = _this13.get(file); // 不存在直接响应\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            } // 不是文件对象\n\n\n            if (!file.fileObject) {\n              return reject(new Error('file_object'));\n            } // 有错误自动响应\n\n\n            if (file.error) {\n              if (file.error instanceof Error) {\n                return reject(file.error);\n              }\n\n              return reject(new Error(file.error));\n            } // 未激活\n\n\n            if (!file.active) {\n              return reject(new Error('abort'));\n            } // 已完成 直接相应\n\n\n            if (file.success) {\n              return resolve(file);\n            }\n\n            var response = getResponseData();\n            var data = {};\n\n            if (typeof e === 'string') {\n              return reject(new Error(e));\n            }\n\n            switch (e.type) {\n              case 'abort':\n                data.error = 'abort';\n                break;\n\n              case 'error':\n                if (file.error) {\n                  data.error = file.error;\n                } else if (response === null) {\n                  data.error = 'network';\n                } else {\n                  data.error = 'denied';\n                }\n\n                break;\n\n              default:\n                if (file.error) {\n                  data.error = file.error;\n                } else if (response === null) {\n                  data.error = 'network';\n                } else {\n                  data.progress = '100.00';\n                }\n\n            }\n\n            if (response !== null) {\n              if (response && response.substr(0, 1) === '{' && response.substr(response.length - 1, 1) === '}') {\n                try {\n                  response = JSON.parse(response);\n                } catch (err) {}\n              }\n\n              data.response = response;\n            } // 更新\n\n\n            file = _this13.update(file, data);\n\n            if (!file) {\n              return reject(new Error('not_exists'));\n            }\n\n            if ((_file3 = file) !== null && _file3 !== void 0 && _file3.error) {\n              if (file.error instanceof Error) {\n                return reject(file.error);\n              }\n\n              return reject(new Error(file.error));\n            } // 响应\n\n\n            return resolve(file);\n          }; // 添加事件\n\n\n          iframe.onload = fn;\n          iframe.onerror = fn;\n          iframe.onabort = fn; // 禁止 esc 键\n\n          document.body.addEventListener('keydown', onKeydown); // 提交\n\n          form.submit();\n        }, 50);\n      }).then(function (res) {\n        var _iframe$parentNode;\n\n        iframe === null || iframe === void 0 ? void 0 : (_iframe$parentNode = iframe.parentNode) === null || _iframe$parentNode === void 0 ? void 0 : _iframe$parentNode.removeChild(iframe);\n        return res;\n      }).catch(function (res) {\n        var _iframe$parentNode2;\n\n        iframe === null || iframe === void 0 ? void 0 : (_iframe$parentNode2 = iframe.parentNode) === null || _iframe$parentNode2 === void 0 ? void 0 : _iframe$parentNode2.removeChild(iframe);\n        return res;\n      });\n    },\n    watchActive: function watchActive(active) {\n      var file;\n      var index = 0;\n\n      while (file = this.files[index]) {\n        index++;\n        if (!file.fileObject) ;else if (active && !this.destroy) {\n          if (this.uploading >= this.thread || this.uploading && !this.features.html5) {\n            break;\n          }\n\n          if (!file.active && !file.error && !file.success) {\n            this.update(file, {\n              active: true\n            });\n          }\n        } else {\n          if (file.active) {\n            this.update(file, {\n              active: false\n            });\n          }\n        }\n      }\n\n      if (this.uploading === 0) {\n        this.active = false;\n      }\n    },\n    watchDrop: function watchDrop(newDrop) {\n      var oldDrop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n      if (!this.features.drop) {\n        return;\n      }\n\n      if (newDrop === oldDrop) {\n        return;\n      } // 移除挂载\n\n\n      if (this.dropElement) {\n        try {\n          document.removeEventListener('dragenter', this.onDocumentDragenter, false);\n          document.removeEventListener('dragleave', this.onDocumentDragleave, false);\n          document.removeEventListener('dragover', this.onDocumentDragover, false);\n          document.removeEventListener('drop', this.onDocumentDrop, false);\n          this.dropElement.removeEventListener('dragover', this.onDragover, false);\n          this.dropElement.removeEventListener('drop', this.onDrop, false);\n        } catch (e) {}\n      }\n\n      var el = null;\n      if (!newDrop) ;else if (typeof newDrop === 'string') {\n        // @ts-ignore\n        el = document.querySelector(newDrop) || this.$root.$el.querySelector(newDrop);\n      } else if (newDrop === true) {\n        var _el;\n\n        // @ts-ignore\n        el = this.$parent.$el;\n\n        if (!el || ((_el = el) === null || _el === void 0 ? void 0 : _el.nodeType) === 8) {\n          var _el2;\n\n          // @ts-ignore\n          el = this.$root.$el;\n\n          if (!el || ((_el2 = el) === null || _el2 === void 0 ? void 0 : _el2.nodeType) === 8) {\n            el = document.body;\n          }\n        }\n      } else {\n        el = newDrop;\n      }\n      this.dropElement = el;\n\n      if (this.dropElement) {\n        document.addEventListener('dragenter', this.onDocumentDragenter, false);\n        document.addEventListener('dragleave', this.onDocumentDragleave, false);\n        document.addEventListener('dragover', this.onDocumentDragover, false);\n        document.addEventListener('drop', this.onDocumentDrop, false);\n        this.dropElement.addEventListener('dragover', this.onDragover, false);\n        this.dropElement.addEventListener('drop', this.onDrop, false);\n      }\n    },\n    watchDropActive: function watchDropActive(newDropActive, oldDropActive) {\n      if (newDropActive === oldDropActive) {\n        return;\n      }\n\n      if (this.dropTimeout) {\n        clearTimeout(this.dropTimeout);\n        this.dropTimeout = null;\n      }\n\n      if (newDropActive) {\n        // @ts-ignore\n        this.dropTimeout = setTimeout(this.onDocumentDrop, 1000);\n      }\n    },\n    onDocumentDragenter: function onDocumentDragenter(e) {\n      var _dt$files, _dt$types;\n\n      if (this.dropActive) {\n        return;\n      }\n\n      if (!e.dataTransfer) {\n        return;\n      }\n\n      var dt = e.dataTransfer;\n\n      if (dt !== null && dt !== void 0 && (_dt$files = dt.files) !== null && _dt$files !== void 0 && _dt$files.length) {\n        this.dropActive = true;\n      } else if (!dt.types) {\n        this.dropActive = true;\n      } else if (dt.types.indexOf && dt.types.indexOf('Files') !== -1) {\n        this.dropActive = true; // @ts-ignore\n      } else if ((_dt$types = dt.types) !== null && _dt$types !== void 0 && _dt$types.contains && dt.types.contains('Files')) {\n        this.dropActive = true;\n      }\n\n      if (this.dropActive) {\n        this.watchDropActive(true);\n      }\n    },\n    onDocumentDragleave: function onDocumentDragleave(e) {\n      if (!this.dropActive) {\n        return;\n      } // @ts-ignore\n\n\n      if (e.target === e.explicitOriginalTarget || !e.fromElement && (e.clientX <= 0 || e.clientY <= 0 || e.clientX >= window.innerWidth || e.clientY >= window.innerHeight)) {\n        this.dropActive = false;\n        this.watchDropActive(false);\n      }\n    },\n    onDocumentDragover: function onDocumentDragover() {\n      this.watchDropActive(true);\n    },\n    onDocumentDrop: function onDocumentDrop() {\n      this.dropActive = false;\n      this.watchDropActive(false);\n    },\n    onDragover: function onDragover(e) {\n      e.preventDefault();\n    },\n    onDrop: function onDrop(e) {\n      e.preventDefault();\n      e.dataTransfer && this.addDataTransfer(e.dataTransfer);\n    },\n    inputOnChange: async function inputOnChange(e) {\n      var _this14 = this;\n\n      if (!(e.target instanceof HTMLInputElement)) {\n        return Promise.reject(new Error(\"not HTMLInputElement\"));\n      }\n\n      e.target;\n\n      var reinput = function reinput(res) {\n        _this14.reload = true; // @ts-ignore\n\n        _this14.$nextTick(function () {\n          _this14.reload = false;\n        });\n\n        return res;\n      };\n\n      return this.addInputFile(e.target).then(reinput).catch(reinput);\n    }\n  }\n});\nvar _hoisted_1 = [\"for\"];\nvar _hoisted_2 = [\"name\", \"id\", \"accept\", \"capture\", \"disabled\", \"webkitdirectory\", \"allowdirs\", \"directory\", \"multiple\"];\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"span\", {\n    class: normalizeClass(_ctx.className)\n  }, [renderSlot(_ctx.$slots, \"default\"), createElementVNode(\"label\", {\n    for: _ctx.forId\n  }, null, 8, _hoisted_1), !_ctx.reload ? (openBlock(), createElementBlock(\"input\", {\n    key: 0,\n    ref: \"input\",\n    type: \"file\",\n    name: _ctx.name,\n    id: _ctx.forId,\n    accept: _ctx.accept,\n    capture: _ctx.capture,\n    disabled: _ctx.disabled,\n    webkitdirectory: _ctx.iDirectory,\n    allowdirs: _ctx.iDirectory,\n    directory: _ctx.iDirectory,\n    multiple: _ctx.multiple && _ctx.features.html5,\n    onChange: _cache[0] || (_cache[0] = function () {\n      return _ctx.inputOnChange && _ctx.inputOnChange.apply(_ctx, arguments);\n    })\n  }, null, 40, _hoisted_2)) : createCommentVNode(\"\", true)], 2);\n}\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"\\n.file-uploads {\\n  overflow: hidden;\\n  position: relative;\\n  text-align: center;\\n  display: inline-block;\\n}\\n.file-uploads.file-uploads-html4 input,\\n.file-uploads.file-uploads-html5 label {\\n  /* background fix ie  click */\\n  background: #fff;\\n  opacity: 0;\\n  font-size: 20em;\\n  z-index: 1;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n}\\n.file-uploads.file-uploads-html5 input,\\n.file-uploads.file-uploads-html4 label {\\n  /* background fix ie  click */\\n  background: rgba(255, 255, 255, 0);\\n  overflow: hidden;\\n  position: fixed;\\n  width: 1px;\\n  height: 1px;\\n  z-index: -1;\\n  opacity: 0;\\n}\\n\";\nstyleInject(css_248z);\nscript.render = render;\nexport { script as default };\n//# sourceMappingURL=vue-upload-component.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}