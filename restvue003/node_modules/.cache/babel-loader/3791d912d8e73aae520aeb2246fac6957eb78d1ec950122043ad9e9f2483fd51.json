{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_vue_upload_component = _resolveComponent(\"vue-upload-component\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_el_row, null, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 4\n    }, {\n      default: _withCtx(() => [_createVNode(_component_vue_upload_component, {\n        ref: \"upload\",\n        \"post-action\": _ctx.$store.state.api + '/uploaders',\n        directory: \"\",\n        multiple: \"\",\n        modelValue: $data.files,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.files = $event),\n        onClick: _cache[1] || (_cache[1] = $event => $options.fiel()),\n        onInputFile: $options.inputFile,\n        thread: 5,\n        data: $data.additionalData\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, null, {\n          default: _withCtx(() => [_createTextVNode(\"上传目录\")]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"post-action\", \"modelValue\", \"onInputFile\", \"data\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 4\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        onClick: $options.startUpload\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"开始上传\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 4\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        onClick: _cache[2] || (_cache[2] = $event => $options.clearFiles($data.files))\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"取消选择\")]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.$store.state.files, i => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: i\n    }, [_createVNode(_component_el_row, null, {\n      default: _withCtx(() => [_createVNode(_component_el_col, {\n        span: 4\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"文件名: \" + _toDisplayString(i.name), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_col, {\n        span: 4\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"大小:\" + _toDisplayString($options.SuLvZhuangHuang(i.size)), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_el_row","default","_withCtx","_component_el_col","span","_component_vue_upload_component","ref","_ctx","$store","state","api","directory","multiple","modelValue","$data","files","_cache","$event","onClick","$options","fiel","onInputFile","inputFile","thread","data","additionalData","_component_el_button","_createTextVNode","_","startUpload","clearFiles","_Fragment","_renderList","i","key","_toDisplayString","name","SuLvZhuangHuang","size"],"sources":["E:\\备份\\桌面\\git\\v0.1.0\\restvue003\\src\\components\\updataFile2.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <el-row>\r\n        <el-col :span=\"4\"> <vue-upload-component\r\n    ref=\"upload\"\r\n    :post-action=\"$store.state.api+'/uploaders'\"\r\n    directory\r\n    multiple\r\n    v-model=\"files\"\r\n    @click=\"fiel()\"\r\n    @input-file=\"inputFile\"\r\n    :thread=\"5\"\r\n    :data=\"additionalData\"\r\n  >\r\n <el-button>上传目录</el-button>\r\n</vue-upload-component></el-col>\r\n<el-col :span=\"4\"><el-button @click=\"startUpload\">开始上传</el-button></el-col>\r\n<el-col :span=\"4\"><el-button @click=\"clearFiles(files)\">取消选择</el-button></el-col>\r\n</el-row>\r\n\r\n<div v-for=\"i in $store.state.files\" :key=\"i\">\r\n  <el-row>\r\n    <el-col :span=\"4\">文件名:  {{i.name}}</el-col>\r\n<el-col :span=\"4\">大小:{{ SuLvZhuangHuang(i.size )}}</el-col>\r\n</el-row>\r\n</div>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nimport{ElNotification} from 'element-plus'\r\nimport VueUploadComponent from 'vue-upload-component'\r\n// import progressEl from '@/components/progressEl.vue'\r\nexport default{\r\n    name:\"updataFile2\",\r\n    components:{\r\n        'vue-upload-component': VueUploadComponent\r\n    },\r\n    data(){\r\n      return {\r\n      uploadedCount:0,\r\n      totalFiles:0,\r\n      totalSize:0,\r\n      uploadPercentage:10,\r\n      files:[],\r\n      additionalData: {\r\n        uploadpath:this.$store.state.DirPath\r\n      }\r\n      \r\n    }\r\n    },\r\n    methods:{\r\n      SuLvZhuangHuang(i){\r\n    if (i < 1024) {\r\nreturn i.toFixed(2) + ' B/s';\r\n} else if (i < 1024 * 1024) {\r\nreturn (i / 1024).toFixed(2) + ' KB/s';\r\n} else if (i < 1024 * 1024 * 1024) {\r\nreturn (i / (1024 * 1024)).toFixed(2) + ' MB/s';\r\n} else {\r\nreturn (i / (1024 * 1024 * 1024)).toFixed(2) + ' GB/s';\r\n}\r\n},\r\n      inputFile(newl){\r\n  // for(let i=0;i<this.$store.state.files.length;i++)\r\n        // if( this.$store.state.files[i].size !==0){\r\n          //  console.log(this.$store.state.files[i].response);\r\n        // }l\r\n\r\n        console.log(this.$store.state.files);\r\n        this.$store.state.files= this.files\r\n         \r\n           if(newl.error!=''){\r\n            ElNotification({\r\n                    title: '错误',\r\n                    message: newl.error,\r\n                    duration: 0,\r\n                  })\r\n           }\r\n           if(newl.success==true){\r\n            ElNotification({\r\n                    title: '成功',\r\n                    message: newl.progress,\r\n                    duration: 3000,\r\n                  })\r\n            \r\n            axios({\r\n            url:this.$store.state.api+'/DirsFileList',\r\n            method:\"post\",\r\n            params:{\r\n                            'DirsFileList':this.$store.state.DirPath\r\n                        },\r\n        }).then(res=>{\r\n            console.log(res.data.data);\r\n            this.$store.state.DirsFileList=res.data.data\r\n            for(let i=0;i<this.$store.state.DirsFileList.length;i++){\r\n            this.$store.state.DirsFileList[i]={'index':i,'data':this.$store.state.DirsFileList[i],\"FileType\":false}\r\n            axios({\r\n                url:this.$store.state.api+\"/OpenDir\",\r\n                method:'post',\r\n            }).then(res=>{\r\n                let h=Object.values(res.data.su)\r\n                for(let i=0;i<this.$store.state.DirsFileList.length;i++){\r\n                    for(let j=0;j<=h.length;j++){\r\n                        if(this.$store.state.DirsFileList[i].data==h[j]){\r\n                            this.$store.state.DirsFileList[i].FileType='文件夹'\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                    \r\n            }) \r\n        }\r\n        })\r\n        }\r\n                \r\n                \r\n        \r\n},\r\n      startUpload(){\r\n      for(let i=0;i<this.$store.state.files.length;i++)\r\n        if( this.$store.state.files[i].size !==0){\r\n          this.$refs.upload.active = true\r\n           this.$store.state.FilesTyoes='进度条'\r\n           this.$store.state.files[i].progress=Number(this.$store.state.files[i].progress)\r\n          \r\n        }\r\n        console.log(this.files);\r\n        \r\n \r\n      },\r\n      fiel(){\r\n        for(let i=0;i<this.$store.state.files.length;i++)\r\n          if( this.$store.state.files[i].size !==0){\r\n          this.$store.state.files[i].size=Number(this.$store.state.files[i].size)\r\n\r\n        }\r\n        \r\n      },\r\n      clearFiles(files){\r\n        if(this.files.length!=0){\r\n          this.$refs.upload.remove(files)\r\n          this.$store.state.files=[]\r\n        }\r\n         \r\n      },\r\n      \r\n    \r\n    \r\n    }\r\n   \r\n  }\r\n</script>\r\n"],"mappings":";;;;;;uBACIA,mBAAA,CA0BM,cAzBJC,YAAA,CAgBGC,iBAAA;IAlBTC,OAAA,EAAAC,QAAA,CAGQ,MAYwB,CAZxBH,YAAA,CAYwBI,iBAAA;MAZfC,IAAI,EAAE;IAAC;MAHxBH,OAAA,EAAAC,QAAA,CAG2B,MAYJ,CAZIH,YAAA,CAYJM,+BAAA;QAXnBC,GAAG,EAAC,QAAQ;QACX,aAAW,EAAEC,IAAA,CAAAC,MAAM,CAACC,KAAK,CAACC,GAAG;QAC9BC,SAAS,EAAT,EAAS;QACTC,QAAQ,EAAR,EAAQ;QAPZC,UAAA,EAQaC,KAAA,CAAAC,KAAK;QARlB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAQaH,KAAA,CAAAC,KAAK,GAAAE,MAAA;QACbC,OAAK,EAAAF,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEE,QAAA,CAAAC,IAAI;QACXC,WAAU,EAAEF,QAAA,CAAAG,SAAS;QACrBC,MAAM,EAAE,CAAC;QACTC,IAAI,EAAEV,KAAA,CAAAW;;QAZXxB,OAAA,EAAAC,QAAA,CAcC,MAA2B,CAA3BH,YAAA,CAA2B2B,oBAAA;UAd5BzB,OAAA,EAAAC,QAAA,CAcY,MAAI,CAdhByB,gBAAA,CAcY,MAAI,E;UAdhBC,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;QAgBA7B,YAAA,CAA2EI,iBAAA;MAAlEC,IAAI,EAAE;IAAC;MAhBhBH,OAAA,EAAAC,QAAA,CAgBkB,MAAgD,CAAhDH,YAAA,CAAgD2B,oBAAA;QAApCR,OAAK,EAAEC,QAAA,CAAAU;MAAW;QAhBhD5B,OAAA,EAAAC,QAAA,CAgBkD,MAAI,CAhBtDyB,gBAAA,CAgBkD,MAAI,E;QAhBtDC,CAAA;;MAAAA,CAAA;QAiBA7B,YAAA,CAAiFI,iBAAA;MAAxEC,IAAI,EAAE;IAAC;MAjBhBH,OAAA,EAAAC,QAAA,CAiBkB,MAAsD,CAAtDH,YAAA,CAAsD2B,oBAAA;QAA1CR,OAAK,EAAAF,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEE,QAAA,CAAAW,UAAU,CAAChB,KAAA,CAAAC,KAAK;;QAjBrDd,OAAA,EAAAC,QAAA,CAiBwD,MAAI,CAjB5DyB,gBAAA,CAiBwD,MAAI,E;QAjB5DC,CAAA;;MAAAA,CAAA;;IAAAA,CAAA;yBAoBA9B,mBAAA,CAKMiC,SAAA,QAzBNC,WAAA,CAoBiBzB,IAAA,CAAAC,MAAM,CAACC,KAAK,CAACM,KAAK,EAAvBkB,CAAC;yBAAbnC,mBAAA,CAKM;MALgCoC,GAAG,EAAED;IAAC,IAC1ClC,YAAA,CAGOC,iBAAA;MAxBTC,OAAA,EAAAC,QAAA,CAsBI,MAA2C,CAA3CH,YAAA,CAA2CI,iBAAA;QAAlCC,IAAI,EAAE;MAAC;QAtBpBH,OAAA,EAAAC,QAAA,CAsBsB,MAAM,CAtB5ByB,gBAAA,CAsBsB,OAAM,GAAAQ,gBAAA,CAAEF,CAAC,CAACG,IAAI,iB;QAtBpCR,CAAA;oCAuBA7B,YAAA,CAA2DI,iBAAA;QAAlDC,IAAI,EAAE;MAAC;QAvBhBH,OAAA,EAAAC,QAAA,CAuBkB,MAAG,CAvBrByB,gBAAA,CAuBkB,KAAG,GAAAQ,gBAAA,CAAGhB,QAAA,CAAAkB,eAAe,CAACJ,CAAC,CAACK,IAAI,kB;QAvB9CV,CAAA;;MAAAA,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}