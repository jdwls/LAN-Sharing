{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"TopLevelDirectory\",\n  data() {\n    return {\n      isDisabled: false // 使用Vue的数据驱动控制按钮禁用状态\n    };\n  },\n  methods: {\n    async topleveldirectory() {\n      this.isDisabled = true; // 禁用按钮\n      // let m = this.$store.state.DirPath.split('/');\n      const ress = await this.GetDirs();\n      // if (m.length > 2) {\n      //     // 如果目录层级大于2\n      //     const res = await this.getTopLevelDirectory();\n      //     if (res.data.data !== '') {\n      //         this.$store.state.DirPath = res.data.data;\n      //         this.isDisabled = true;\n      //     }\n      // } else {\n      //     // 如果目录层级不大于2，走 OptionDir 流程\n      //     const res = await this.getOptionDir();\n      //     this.$store.state.DirPath = res.data.data;\n      //     await this.updateDirsFileList();\n      // }\n      try {\n        if (this.$store.state.DirPath == ress.data.data) {\n          this.isDisabled = true;\n        } else {\n          this.$store.state.DirPath = await this.getTopLevelDirectory().data;\n          const res = await this.getOptionDir();\n          this.$store.state.DirPath = res.data.data;\n          await this.updateDirsFileList();\n        }\n      } finally {\n        // 无论成功与否都解除禁用\n        setTimeout(() => {\n          this.isDisabled = false;\n        }, 1000);\n      }\n    },\n    async getTopLevelDirectory() {\n      return axios({\n        url: this.$store.state.api + '/TopLevelDirectory',\n        method: 'get',\n        params: {\n          'TopLevelDirectoryPathName': this.$store.state.DirPath\n        }\n      });\n    },\n    async getOptionDir() {\n      return axios({\n        url: this.$store.state.api + '/OptionDir',\n        method: \"post\"\n      });\n    },\n    async GetDirs() {\n      return axios({\n        url: this.$store.state.api + '/getDirs',\n        method: \"get\"\n      });\n    },\n    async updateDirsFileList() {\n      const res = await axios({\n        url: this.$store.state.api + '/DirsFileList',\n        method: \"post\",\n        params: {\n          'DirsFileList': this.$store.state.DirPath\n        }\n      });\n      let dirsFileList = res.data.data.map((item, index) => ({\n        index: index,\n        data: item,\n        FileType: false\n      }));\n\n      // 更新文件类型\n      const dirRes = await this.openDir();\n      const folderList = Object.values(dirRes.data.su);\n      dirsFileList = this.updateFileTypes(dirsFileList, folderList, '文件夹');\n\n      // 获取文件类型并更新\n      const fileTypeRes = await this.getFileTypes();\n      let fileTypes = Object.values(fileTypeRes.data.filesypessPathlistTypes);\n      fileTypes.forEach(type => {\n        dirsFileList[type.index].FileType = type.filesypessPathlistType;\n      });\n\n      // 更新 store 中的文件列表\n      this.$store.state.DirsFileList = dirsFileList;\n    },\n    async openDir() {\n      return axios({\n        url: this.$store.state.api + \"/OpenDir\",\n        method: 'post'\n      });\n    },\n    async getFileTypes() {\n      return axios({\n        url: this.$store.state.api + \"/filesypess\",\n        method: \"get\",\n        params: {\n          'filesypessPath': this.$store.state.DirPath\n        }\n      });\n    },\n    updateFileTypes(dirsFileList, folderList, folderType) {\n      dirsFileList.forEach(item => {\n        if (folderList.includes(item.data)) {\n          item.FileType = folderType;\n        }\n      });\n      return dirsFileList;\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","isDisabled","methods","topleveldirectory","ress","GetDirs","$store","state","DirPath","getTopLevelDirectory","res","getOptionDir","updateDirsFileList","setTimeout","url","api","method","params","dirsFileList","map","item","index","FileType","dirRes","openDir","folderList","Object","values","su","updateFileTypes","fileTypeRes","getFileTypes","fileTypes","filesypessPathlistTypes","forEach","type","filesypessPathlistType","DirsFileList","folderType","includes"],"sources":["C:\\Users\\Admin\\Desktop\\LAN-Sharing-0.1.0\\restvue003\\src\\components\\TopLevelDirectory.vue"],"sourcesContent":["<template>\n    <div>\n        <el-button :class=\"{ disabled: isDisabled }\" @click=\"topleveldirectory\" class=\"tets\">\n            返回上级目录\n        </el-button>\n    </div>\n</template>\n\n<script defer>\nimport axios from 'axios';\n\nexport default {\n    name: \"TopLevelDirectory\",\n    data() {\n        return {\n            isDisabled: false, // 使用Vue的数据驱动控制按钮禁用状态\n        };\n    },\n    methods: {\n       \n        async topleveldirectory() {\n    \n            this.isDisabled = true; // 禁用按钮\n            // let m = this.$store.state.DirPath.split('/');\n            const ress = await this.GetDirs();\n                // if (m.length > 2) {\n                //     // 如果目录层级大于2\n                //     const res = await this.getTopLevelDirectory();\n                //     if (res.data.data !== '') {\n                //         this.$store.state.DirPath = res.data.data;\n                //         this.isDisabled = true;\n                //     }\n                // } else {\n                //     // 如果目录层级不大于2，走 OptionDir 流程\n                //     const res = await this.getOptionDir();\n                //     this.$store.state.DirPath = res.data.data;\n                //     await this.updateDirsFileList();\n                // }\n                try  {if (this.$store.state.DirPath == ress.data.data){\n                    this.isDisabled = true;\n                }\n                else{\n                    this.$store.state.DirPath=await this.getTopLevelDirectory().data\n                    const res = await this.getOptionDir();\n                    this.$store.state.DirPath = res.data.data;\n                    await this.updateDirsFileList();\n                }\n            }finally {\n                // 无论成功与否都解除禁用\n                setTimeout(() => {\n                    this.isDisabled = false;\n                }, 1000);\n            }\n        },\n\n        async getTopLevelDirectory() {\n            return axios({\n                url: this.$store.state.api + '/TopLevelDirectory',\n                method: 'get',\n                params: {\n                    'TopLevelDirectoryPathName': this.$store.state.DirPath\n                }\n            });\n        },\n        async getOptionDir() {\n            return axios({\n                url: this.$store.state.api + '/OptionDir',\n                method: \"post\"\n            });\n        },\n        async GetDirs() {\n            return axios({\n                url: this.$store.state.api + '/getDirs',\n                method: \"get\"\n            });\n        },\n        async updateDirsFileList() {\n            const res = await axios({\n                url: this.$store.state.api + '/DirsFileList',\n                method: \"post\",\n                params: {\n                    'DirsFileList': this.$store.state.DirPath\n                }\n            });\n\n            let dirsFileList = res.data.data.map((item, index) => ({\n                index: index,\n                data: item,\n                FileType: false\n            }));\n\n            // 更新文件类型\n            const dirRes = await this.openDir();\n            const folderList = Object.values(dirRes.data.su);\n            dirsFileList = this.updateFileTypes(dirsFileList, folderList, '文件夹');\n\n            // 获取文件类型并更新\n            const fileTypeRes = await this.getFileTypes();\n            let fileTypes = Object.values(fileTypeRes.data.filesypessPathlistTypes);\n            fileTypes.forEach(type => {\n                dirsFileList[type.index].FileType = type.filesypessPathlistType;\n            });\n\n            // 更新 store 中的文件列表\n            this.$store.state.DirsFileList = dirsFileList;\n        },\n        async openDir() {\n            return axios({\n                url: this.$store.state.api + \"/OpenDir\",\n                method: 'post'\n            });\n        },\n        async getFileTypes() {\n            return axios({\n                url: this.$store.state.api + \"/filesypess\",\n                method: \"get\",\n                params: {\n                    'filesypessPath': this.$store.state.DirPath\n                }\n            });\n        },\n        updateFileTypes(dirsFileList, folderList, folderType) {\n            dirsFileList.forEach(item => {\n                if (folderList.includes(item.data)) {\n                    item.FileType = folderType;\n                }\n            });\n            return dirsFileList;\n        },\n\n       \n    }\n};\n</script>\n\n<style scoped>\n.disabled {\n    pointer-events: none;\n}\n</style>\n"],"mappings":"AASA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAE,mBAAmB;EACzBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,UAAU,EAAE,KAAK,CAAE;IACvB,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IAEL,MAAMC,iBAAiBA,CAAA,EAAG;MAEtB,IAAI,CAACF,UAAS,GAAI,IAAI,EAAE;MACxB;MACA,MAAMG,IAAG,GAAI,MAAM,IAAI,CAACC,OAAO,CAAC,CAAC;MAC7B;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAK;QAAC,IAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,OAAM,IAAKJ,IAAI,CAACJ,IAAI,CAACA,IAAI,EAAC;UAClD,IAAI,CAACC,UAAS,GAAI,IAAI;QAC1B,OACI;UACA,IAAI,CAACK,MAAM,CAACC,KAAK,CAACC,OAAO,GAAC,MAAM,IAAI,CAACC,oBAAoB,CAAC,CAAC,CAACT,IAAG;UAC/D,MAAMU,GAAE,GAAI,MAAM,IAAI,CAACC,YAAY,CAAC,CAAC;UACrC,IAAI,CAACL,MAAM,CAACC,KAAK,CAACC,OAAM,GAAIE,GAAG,CAACV,IAAI,CAACA,IAAI;UACzC,MAAM,IAAI,CAACY,kBAAkB,CAAC,CAAC;QACnC;MACJ,CAAC,SAAQ;QACL;QACAC,UAAU,CAAC,MAAM;UACb,IAAI,CAACZ,UAAS,GAAI,KAAK;QAC3B,CAAC,EAAE,IAAI,CAAC;MACZ;IACJ,CAAC;IAED,MAAMQ,oBAAoBA,CAAA,EAAG;MACzB,OAAOX,KAAK,CAAC;QACTgB,GAAG,EAAE,IAAI,CAACR,MAAM,CAACC,KAAK,CAACQ,GAAE,GAAI,oBAAoB;QACjDC,MAAM,EAAE,KAAK;QACbC,MAAM,EAAE;UACJ,2BAA2B,EAAE,IAAI,CAACX,MAAM,CAACC,KAAK,CAACC;QACnD;MACJ,CAAC,CAAC;IACN,CAAC;IACD,MAAMG,YAAYA,CAAA,EAAG;MACjB,OAAOb,KAAK,CAAC;QACTgB,GAAG,EAAE,IAAI,CAACR,MAAM,CAACC,KAAK,CAACQ,GAAE,GAAI,YAAY;QACzCC,MAAM,EAAE;MACZ,CAAC,CAAC;IACN,CAAC;IACD,MAAMX,OAAOA,CAAA,EAAG;MACZ,OAAOP,KAAK,CAAC;QACTgB,GAAG,EAAE,IAAI,CAACR,MAAM,CAACC,KAAK,CAACQ,GAAE,GAAI,UAAU;QACvCC,MAAM,EAAE;MACZ,CAAC,CAAC;IACN,CAAC;IACD,MAAMJ,kBAAkBA,CAAA,EAAG;MACvB,MAAMF,GAAE,GAAI,MAAMZ,KAAK,CAAC;QACpBgB,GAAG,EAAE,IAAI,CAACR,MAAM,CAACC,KAAK,CAACQ,GAAE,GAAI,eAAe;QAC5CC,MAAM,EAAE,MAAM;QACdC,MAAM,EAAE;UACJ,cAAc,EAAE,IAAI,CAACX,MAAM,CAACC,KAAK,CAACC;QACtC;MACJ,CAAC,CAAC;MAEF,IAAIU,YAAW,GAAIR,GAAG,CAACV,IAAI,CAACA,IAAI,CAACmB,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,MAAM;QACnDA,KAAK,EAAEA,KAAK;QACZrB,IAAI,EAAEoB,IAAI;QACVE,QAAQ,EAAE;MACd,CAAC,CAAC,CAAC;;MAEH;MACA,MAAMC,MAAK,GAAI,MAAM,IAAI,CAACC,OAAO,CAAC,CAAC;MACnC,MAAMC,UAAS,GAAIC,MAAM,CAACC,MAAM,CAACJ,MAAM,CAACvB,IAAI,CAAC4B,EAAE,CAAC;MAChDV,YAAW,GAAI,IAAI,CAACW,eAAe,CAACX,YAAY,EAAEO,UAAU,EAAE,KAAK,CAAC;;MAEpE;MACA,MAAMK,WAAU,GAAI,MAAM,IAAI,CAACC,YAAY,CAAC,CAAC;MAC7C,IAAIC,SAAQ,GAAIN,MAAM,CAACC,MAAM,CAACG,WAAW,CAAC9B,IAAI,CAACiC,uBAAuB,CAAC;MACvED,SAAS,CAACE,OAAO,CAACC,IAAG,IAAK;QACtBjB,YAAY,CAACiB,IAAI,CAACd,KAAK,CAAC,CAACC,QAAO,GAAIa,IAAI,CAACC,sBAAsB;MACnE,CAAC,CAAC;;MAEF;MACA,IAAI,CAAC9B,MAAM,CAACC,KAAK,CAAC8B,YAAW,GAAInB,YAAY;IACjD,CAAC;IACD,MAAMM,OAAOA,CAAA,EAAG;MACZ,OAAO1B,KAAK,CAAC;QACTgB,GAAG,EAAE,IAAI,CAACR,MAAM,CAACC,KAAK,CAACQ,GAAE,GAAI,UAAU;QACvCC,MAAM,EAAE;MACZ,CAAC,CAAC;IACN,CAAC;IACD,MAAMe,YAAYA,CAAA,EAAG;MACjB,OAAOjC,KAAK,CAAC;QACTgB,GAAG,EAAE,IAAI,CAACR,MAAM,CAACC,KAAK,CAACQ,GAAE,GAAI,aAAa;QAC1CC,MAAM,EAAE,KAAK;QACbC,MAAM,EAAE;UACJ,gBAAgB,EAAE,IAAI,CAACX,MAAM,CAACC,KAAK,CAACC;QACxC;MACJ,CAAC,CAAC;IACN,CAAC;IACDqB,eAAeA,CAACX,YAAY,EAAEO,UAAU,EAAEa,UAAU,EAAE;MAClDpB,YAAY,CAACgB,OAAO,CAACd,IAAG,IAAK;QACzB,IAAIK,UAAU,CAACc,QAAQ,CAACnB,IAAI,CAACpB,IAAI,CAAC,EAAE;UAChCoB,IAAI,CAACE,QAAO,GAAIgB,UAAU;QAC9B;MACJ,CAAC,CAAC;MACF,OAAOpB,YAAY;IACvB;EAGJ;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}