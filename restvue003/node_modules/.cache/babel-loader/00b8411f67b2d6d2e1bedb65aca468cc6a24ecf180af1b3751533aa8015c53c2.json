{"ast":null,"code":"import axios from 'axios';\nimport { ElNotification } from 'element-plus';\nimport VueUploadComponent from 'vue-upload-component';\n// import progressEl from '@/components/progressEl.vue'\nexport default {\n  name: \"updataFile2\",\n  components: {\n    'vue-upload-component': VueUploadComponent\n  },\n  data() {\n    return {\n      uploadedCount: 0,\n      totalFiles: 0,\n      totalSize: 0,\n      uploadPercentage: 10,\n      files: [],\n      additionalData: {\n        uploadpath: this.$store.state.DirPath\n      }\n    };\n  },\n  methods: {\n    SuLvZhuangHuang(i) {\n      if (i < 1024) {\n        return i.toFixed(2) + ' B/s';\n      } else if (i < 1024 * 1024) {\n        return (i / 1024).toFixed(2) + ' KB/s';\n      } else if (i < 1024 * 1024 * 1024) {\n        return (i / (1024 * 1024)).toFixed(2) + ' MB/s';\n      } else {\n        return (i / (1024 * 1024 * 1024)).toFixed(2) + ' GB/s';\n      }\n    },\n    inputFile(newl) {\n      // for(let i=0;i<this.$store.state.files.length;i++)\n      // if( this.$store.state.files[i].size !==0){\n      //  console.log(this.$store.state.files[i].response);\n      // }l\n\n      console.log(this.$store.state.files);\n      this.$store.state.files = this.files;\n      if (newl.error != '') {\n        ElNotification({\n          title: '错误',\n          message: newl.error,\n          duration: 0\n        });\n      }\n      if (newl.success == true) {\n        ElNotification({\n          title: '成功',\n          message: newl.progress,\n          duration: 3000\n        });\n        axios({\n          url: this.$store.state.api + '/DirsFileList',\n          method: \"post\",\n          params: {\n            'DirsFileList': this.$store.state.DirPath\n          }\n        }).then(res => {\n          console.log(res.data.data);\n          this.$store.state.DirsFileList = res.data.data;\n          for (let i = 0; i < this.$store.state.DirsFileList.length; i++) {\n            this.$store.state.DirsFileList[i] = {\n              'index': i,\n              'data': this.$store.state.DirsFileList[i],\n              \"FileType\": false\n            };\n            axios({\n              url: this.$store.state.api + \"/OpenDir\",\n              method: 'post'\n            }).then(res => {\n              let h = Object.values(res.data.su);\n              for (let i = 0; i < this.$store.state.DirsFileList.length; i++) {\n                for (let j = 0; j <= h.length; j++) {\n                  if (this.$store.state.DirsFileList[i].data == h[j]) {\n                    this.$store.state.DirsFileList[i].FileType = '文件夹';\n                    break;\n                  }\n                }\n              }\n            });\n          }\n        });\n      }\n    },\n    startUpload() {\n      for (let i = 0; i < this.$store.state.files.length; i++) if (this.$store.state.files[i].size !== 0) {\n        this.$refs.upload.active = true;\n        this.$store.state.FilesTyoes = '进度条';\n        this.$store.state.files[i].progress = Number(this.$store.state.files[i].progress);\n      }\n      console.log(this.files);\n    },\n    fiel() {\n      for (let i = 0; i < this.$store.state.files.length; i++) if (this.$store.state.files[i].size !== 0) {\n        this.$store.state.files[i].size = Number(this.$store.state.files[i].size);\n      }\n    },\n    clearFiles(files) {\n      if (this.files.length != 0) {\n        this.$refs.upload.remove(files);\n        this.$store.state.files = [];\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","ElNotification","VueUploadComponent","name","components","data","uploadedCount","totalFiles","totalSize","uploadPercentage","files","additionalData","uploadpath","$store","state","DirPath","methods","SuLvZhuangHuang","i","toFixed","inputFile","newl","console","log","error","title","message","duration","success","progress","url","api","method","params","then","res","DirsFileList","length","h","Object","values","su","j","FileType","startUpload","size","$refs","upload","active","FilesTyoes","Number","fiel","clearFiles","remove"],"sources":["C:\\Users\\Administered\\Desktop\\gitclone\\v0.1.0\\restvue003\\src\\components\\updataFile2.vue"],"sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-col :span=\"4\"> <vue-upload-component ref=\"upload\" :post-action=\"$store.state.api + '/uploaders'\" directory\n          multiple v-model=\"files\" @click=\"fiel()\" @input-file=\"inputFile\" :thread=\"5\" :data=\"additionalData\">\n          <el-button>上传目录</el-button>\n        </vue-upload-component></el-col>\n      <el-col :span=\"4\"><el-button @click=\"startUpload\">开始上传</el-button></el-col>\n      <el-col :span=\"4\"><el-button @click=\"clearFiles(files)\">取消选择</el-button></el-col>\n    </el-row>\n\n    <div v-for=\"i in $store.state.files\" :key=\"i\">\n      <el-row>\n        <el-col :span=\"4\">文件名: {{ i.name }}</el-col>\n        <el-col :span=\"4\">大小:{{ SuLvZhuangHuang(i.size) }}</el-col>\n      </el-row>\n    </div>\n\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nimport { ElNotification } from 'element-plus'\nimport VueUploadComponent from 'vue-upload-component'\n// import progressEl from '@/components/progressEl.vue'\nexport default {\n  name: \"updataFile2\",\n  components: {\n    'vue-upload-component': VueUploadComponent\n  },\n  data() {\n    return {\n      uploadedCount: 0,\n      totalFiles: 0,\n      totalSize: 0,\n      uploadPercentage: 10,\n      files: [],\n      additionalData: {\n        uploadpath: this.$store.state.DirPath\n      }\n\n    }\n  },\n  methods: {\n    SuLvZhuangHuang(i) {\n      if (i < 1024) {\n        return i.toFixed(2) + ' B/s';\n      } else if (i < 1024 * 1024) {\n        return (i / 1024).toFixed(2) + ' KB/s';\n      } else if (i < 1024 * 1024 * 1024) {\n        return (i / (1024 * 1024)).toFixed(2) + ' MB/s';\n      } else {\n        return (i / (1024 * 1024 * 1024)).toFixed(2) + ' GB/s';\n      }\n    },\n    inputFile(newl) {\n      // for(let i=0;i<this.$store.state.files.length;i++)\n      // if( this.$store.state.files[i].size !==0){\n      //  console.log(this.$store.state.files[i].response);\n      // }l\n\n      console.log(this.$store.state.files);\n      this.$store.state.files = this.files\n\n      if (newl.error != '') {\n        ElNotification({\n          title: '错误',\n          message: newl.error,\n          duration: 0,\n        })\n      }\n      if (newl.success == true) {\n        ElNotification({\n          title: '成功',\n          message: newl.progress,\n          duration: 3000,\n        })\n\n        axios({\n          url: this.$store.state.api + '/DirsFileList',\n          method: \"post\",\n          params: {\n            'DirsFileList': this.$store.state.DirPath\n          },\n        }).then(res => {\n          console.log(res.data.data);\n          this.$store.state.DirsFileList = res.data.data\n          for (let i = 0; i < this.$store.state.DirsFileList.length; i++) {\n            this.$store.state.DirsFileList[i] = { 'index': i, 'data': this.$store.state.DirsFileList[i], \"FileType\": false }\n            axios({\n              url: this.$store.state.api + \"/OpenDir\",\n              method: 'post',\n            }).then(res => {\n              let h = Object.values(res.data.su)\n              for (let i = 0; i < this.$store.state.DirsFileList.length; i++) {\n                for (let j = 0; j <= h.length; j++) {\n                  if (this.$store.state.DirsFileList[i].data == h[j]) {\n                    this.$store.state.DirsFileList[i].FileType = '文件夹'\n                    break\n                  }\n                }\n              }\n\n            })\n          }\n        })\n      }\n\n\n\n    },\n    startUpload() {\n      for (let i = 0; i < this.$store.state.files.length; i++)\n        if (this.$store.state.files[i].size !== 0) {\n          this.$refs.upload.active = true\n          this.$store.state.FilesTyoes = '进度条'\n          this.$store.state.files[i].progress = Number(this.$store.state.files[i].progress)\n\n        }\n      console.log(this.files);\n\n\n    },\n    fiel() {\n      for (let i = 0; i < this.$store.state.files.length; i++)\n        if (this.$store.state.files[i].size !== 0) {\n          this.$store.state.files[i].size = Number(this.$store.state.files[i].size)\n\n        }\n\n    },\n    clearFiles(files) {\n      if (this.files.length != 0) {\n        this.$refs.upload.remove(files)\n        this.$store.state.files = []\n      }\n\n    },\n\n\n\n  }\n\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}